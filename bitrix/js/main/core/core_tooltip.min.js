(function(window){if(BX.tooltip)return;var arTooltipIndex={},bDisable=false;BX.tooltip=function(i,s,t,e,o){if(BX.message("TOOLTIP_ENABLED")!="Y")return;if(BX.browser.IsAndroid()||BX.browser.IsIOS()){return}BX.ready(function(){var a=BX(s);if(null==a)return;var r=i;if(o&&BX.type.isNotEmptyString(t)){var l=0;for(var n=0,h=t.length;n<h;n++){l=31*l+t.charCodeAt(n)<<0}r=l+i}if(null==arTooltipIndex[r])arTooltipIndex[r]=new BX.CTooltip(i,a,t,e,o);else{arTooltipIndex[r].ANCHOR=a;arTooltipIndex[r].rootClassName=e;arTooltipIndex[r].LOADER=o&&BX.type.isNotEmptyString(t)?t:"/bitrix/tools/tooltip.php";arTooltipIndex[r].Create()}})};BX.tooltip.disable=function(){bDisable=true};BX.tooltip.enable=function(){bDisable=false};BX.CTooltip=function(user_id,anchor,loader,rootClassName,bForceUseLoader){this.LOADER=bForceUseLoader&&BX.type.isNotEmptyString(loader)?loader:"/bitrix/tools/tooltip.php";this.USER_ID=user_id;this.ANCHOR=anchor;this.rootClassName="";if(rootClassName!="undefined"&&rootClassName!=null&&rootClassName.length>0)this.rootClassName=rootClassName;var old=document.getElementById("user_info_"+this.USER_ID);if(null!=old){if(null!=old.parentNode)old.parentNode.removeChild(old);old=null}var _this=this;this.INFO=null;this.width=393;this.height=302;this.CoordsLeft=0;this.CoordsTop=0;this.AnchorRight=0;this.AnchorBottom=0;this.DIV=null;this.ROOT_DIV=null;if(BX.browser.IsIE())this.IFRAME=null;this.v_delta=0;this.classNameAnim=false;this.classNameFixed=false;this.left=0;this.top=0;this.tracking=false;this.active=false;this.showed=false;this.Create=function(){_this.ANCHOR.onmouseover=function(){if(!bDisable){_this.StartTrackMouse(this)}};_this.ANCHOR.onmouseout=function(){_this.StopTrackMouse(this)}};this.Create();this.TrackMouse=function(i){if(!_this.tracking)return;var s;if(i&&i.pageX)s={x:i.pageX,y:i.pageY};else s={x:i.clientX+document.body.scrollLeft,y:i.clientY+document.body.scrollTop};if(s.x<0)s.x=0;if(s.y<0)s.y=0;s.time=_this.tracking;if(!_this.active)_this.active=s;else{if(_this.active.x>=s.x-1&&_this.active.x<=s.x+1&&_this.active.y>=s.y-1&&_this.active.y<=s.y+1){if(_this.active.time+20<=s.time)_this.ShowTooltip()}else _this.active=s}};this.ShowTooltip=function(){var i=document.getElementById("user_info_"+_this.USER_ID);if(bDisable||i&&i.style.display=="block")return;var s=BX.browser.IsIE()&&!BX.browser.IsIE10();if(null==_this.DIV&&null==_this.ROOT_DIV){_this.ROOT_DIV=document.body.appendChild(document.createElement("DIV"));_this.ROOT_DIV.style.position="absolute";_this.DIV=_this.ROOT_DIV.appendChild(document.createElement("DIV"));if(s)_this.DIV.className="bx-user-info-shadow-ie";else _this.DIV.className="bx-user-info-shadow";_this.DIV.style.width=_this.width+"px";_this.DIV.style.height=_this.height+"px"}var t=_this.CoordsLeft;var e=_this.CoordsTop+30;var o=jsUtils.GetWindowScrollPos();var a=document.body;var r=false;var l=false;if(a.clientWidth+o.scrollLeft<t+_this.width){t=_this.AnchorRight-_this.width;r=true}if(e-o.scrollTop<0){e=_this.AnchorBottom-5;l=true;_this.v_delta=40}else _this.v_delta=0;_this.ROOT_DIV.style.left=parseInt(t)+"px";_this.ROOT_DIV.style.top=parseInt(e)+"px";_this.ROOT_DIV.style.zIndex=1200;BX.bind(BX(_this.ROOT_DIV),"click",BX.eventCancelBubble);if(this.rootClassName!="undefined"&&this.rootClassName!=null&&this.rootClassName.length>0)_this.ROOT_DIV.className=this.rootClassName;if(""==_this.DIV.innerHTML){var n;if(_this.LOADER.indexOf("?")>=0){n=_this.LOADER+"&MUL_MODE=INFO&USER_ID="+_this.USER_ID+"&site="+(BX.message("SITE_ID")||"")}else{n=_this.LOADER+"?MUL_MODE=INFO&USER_ID="+_this.USER_ID+"&site="+(BX.message("SITE_ID")||"")}BX.ajax.get(n,_this.InsertData);_this.DIV.id="user_info_"+_this.USER_ID;_this.DIV.innerHTML='<div class="bx-user-info-wrap">'+'<div class="bx-user-info-leftcolumn">'+'<div class="bx-user-photo" id="user-info-photo-'+_this.USER_ID+'"><div class="bx-user-info-data-loading">'+BX.message("JS_CORE_LOADING")+"</div></div>"+'<div class="bx-user-tb-control bx-user-tb-control-left" id="user-info-toolbar-'+_this.USER_ID+'"></div>'+"</div>"+'<div class="bx-user-info-data">'+'<div id="user-info-data-card-'+_this.USER_ID+'"></div>'+'<div class="bx-user-info-data-tools">'+'<div class="bx-user-tb-control bx-user-tb-control-right" id="user-info-toolbar2-'+_this.USER_ID+'"></div>'+'<div class="bx-user-info-data-clear"></div>'+"</div>"+"</div>"+'</div><div class="bx-user-info-bottomarea"></div>'}if(s){_this.DIV.className="bx-user-info-shadow-ie";_this.classNameAnim="bx-user-info-shadow-anim-ie";_this.classNameFixed="bx-user-info-shadow-ie"}else{_this.DIV.className="bx-user-info-shadow";_this.classNameAnim="bx-user-info-shadow-anim";_this.classNameFixed="bx-user-info-shadow"}_this.filterFixed="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/bitrix/components/bitrix/main.user.link/templates/.default/images/cloud-left-top.png', sizingMethod = 'crop' );";if(r&&l){if(BX.browser.IsIE6()){_this.DIV.className="bx-user-info-shadow-hv-ie6";_this.classNameAnim="bx-user-info-shadow-hv-anim-ie6";_this.classNameFixed="bx-user-info-shadow-hv-ie6"}else if(s){_this.DIV.className="bx-user-info-shadow-hv-ie";_this.classNameAnim="bx-user-info-shadow-hv-anim-ie";_this.classNameFixed="bx-user-info-shadow-hv-ie"}else{_this.DIV.className="bx-user-info-shadow-hv";_this.classNameAnim="bx-user-info-shadow-hv-anim";_this.classNameFixed="bx-user-info-shadow-hv"}_this.filterFixed="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/bitrix/components/bitrix/main.user.link/templates/.default/images/cloud-right-bottom.png', sizingMethod = 'crop' );"}else{if(r){if(s){_this.DIV.className="bx-user-info-shadow-h-ie";_this.classNameAnim="bx-user-info-shadow-h-anim-ie";_this.classNameFixed="bx-user-info-shadow-h-ie"}else{_this.DIV.className="bx-user-info-shadow-h";_this.classNameAnim="bx-user-info-shadow-h-anim";_this.classNameFixed="bx-user-info-shadow-h"}_this.filterFixed="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/bitrix/components/bitrix/main.user.link/templates/.default/images/cloud-right-top.png', sizingMethod = 'crop' );"}if(l){if(BX.browser.IsIE6()){_this.DIV.className="bx-user-info-shadow-v-ie6";_this.classNameAnim="bx-user-info-shadow-v-anim-ie6";_this.classNameFixed="bx-user-info-shadow-v-ie6"}else if(s){_this.DIV.className="bx-user-info-shadow-v-ie";_this.classNameAnim="bx-user-info-shadow-v-anim-ie";_this.classNameFixed="bx-user-info-shadow-v-ie"}else{_this.DIV.className="bx-user-info-shadow-v";_this.classNameAnim="bx-user-info-shadow-v-anim";_this.classNameFixed="bx-user-info-shadow-v"}_this.filterFixed="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/bitrix/components/bitrix/main.user.link/templates/.default/images/cloud-left-bottom.png', sizingMethod = 'crop' );"}}if(BX.browser.IsIE()&&null==_this.IFRAME){_this.IFRAME=document.body.appendChild(document.createElement("IFRAME"));_this.IFRAME.id=_this.DIV.id+"_frame";_this.IFRAME.style.position="absolute";_this.IFRAME.style.width=_this.width-60+"px";_this.IFRAME.style.height=_this.height-100+"px";_this.IFRAME.style.borderStyle="solid";_this.IFRAME.style.borderWidth="0px";_this.IFRAME.style.zIndex=550;_this.IFRAME.style.display="none"}if(BX.browser.IsIE()){_this.IFRAME.style.left=parseInt(t)+25+"px";_this.IFRAME.style.top=parseInt(e)+30+_this.v_delta+"px"}_this.DIV.style.display="none";_this.ShowOpacityEffect({func:_this.SetVisible,obj:_this.DIV,arParams:[]},0);document.getElementById("user_info_"+_this.USER_ID).onmouseover=function(){_this.StartTrackMouse(this)};document.getElementById("user_info_"+_this.USER_ID).onmouseout=function(){_this.StopTrackMouse(this)}};this.InsertData=function(data){if(null!=data&&data.length>0){eval("_this.INFO = "+data);var cardEl=document.getElementById("user-info-data-card-"+_this.USER_ID);cardEl.innerHTML=_this.INFO.RESULT.Card;var photoEl=document.getElementById("user-info-photo-"+_this.USER_ID);photoEl.innerHTML=_this.INFO.RESULT.Photo;var toolbarEl=document.getElementById("user-info-toolbar-"+_this.USER_ID);toolbarEl.innerHTML=_this.INFO.RESULT.Toolbar;var toolbar2El=document.getElementById("user-info-toolbar2-"+_this.USER_ID);toolbar2El.innerHTML=_this.INFO.RESULT.Toolbar2}}};BX.CTooltip.prototype.StartTrackMouse=function(i){var s=this;if(!this.tracking){var t=jsUtils.GetRealPos(i);this.CoordsLeft=t.left+0;this.CoordsTop=t.top-325;this.AnchorRight=t.right;this.AnchorBottom=t.bottom;this.tracking=1;jsUtils.addEvent(document,"mousemove",s.TrackMouse);setTimeout(function(){s.tickTimer()},500)}};BX.CTooltip.prototype.StopTrackMouse=function(){var i=this;if(this.tracking){jsUtils.removeEvent(document,"mousemove",i.TrackMouse);this.active=false;setTimeout(function(){i.HideTooltip()},500);this.tracking=false}};BX.CTooltip.prototype.tickTimer=function(){var i=this;if(this.tracking){this.tracking++;if(this.active){if(this.active.time+5<=this.tracking)this.ShowTooltip()}setTimeout(function(){i.tickTimer()},100)}};BX.CTooltip.prototype.HideTooltip=function(){if(!this.tracking)this.ShowOpacityEffect({func:this.SetInVisible,obj:this.DIV,arParams:[]},1)};BX.CTooltip.prototype.ShowOpacityEffect=function(i,s){var t=3;var e=1;var o=1/t;var a=0,r,l=this;if(BX.browser.IsIE()&&l.DIV)l.DIV.className=l.classNameAnim;var n=function(){a++;if(a>t){clearInterval(h);if(!i.arParams)i.arParams=[];if(i.func&&i.obj)i.func.apply(i.obj,i.arParams);return}r=s?1-a*o:a*o;if(l.DIV!=null){try{l.DIV.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+r*100+")";l.DIV.style.opacity=r;l.DIV.style.MozOpacity=r;l.DIV.style.KhtmlOpacity=r}catch(e){}finally{if(!s&&a==1)l.DIV.style.display="block";if(s&&a==t&&l.DIV)l.DIV.style.display="none";if(jsUtils.IsIE()&&a==1&&s&&l.IFRAME)l.IFRAME.style.display="none";if(jsUtils.IsIE()&&a==t&&l.DIV){if(!s)l.IFRAME.style.display="block";l.DIV.style.filter=l.filterFixed;l.DIV.className=l.classNameFixed;l.DIV.innerHTML=""+l.DIV.innerHTML}}}};var h=setInterval(n,e)}})(window);
//# sourceMappingURL=core_tooltip.map.js