(function(e){if(e.BX.indexedDB)return;var n=e.BX;n.indexedDB=function(n){var t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB;e.IDBTransaction=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction;e.IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange;if(typeof t!="undefined"&&typeof e.IDBTransaction!="undefined"&&typeof e.IDBKeyRange!="undefined"){var r=t.open(n.name,parseInt(n.version));r.onsuccess=function(e){if(typeof n.callback=="function"){n.callback(this.result)}};r.onupgradeneeded=function(e){if(typeof n.oScheme!="undefined"){var t=e.target.result;var r=null;var o=null;var c=null;var i=n.oScheme.length;for(var f=0;f<i;f++){r=n.oScheme[f];if(typeof r=="object"&&!t.objectStoreNames.contains(r.name)){o=t.createObjectStore(r.name,{keyPath:typeof r.keyPath!="undefined"&&r.keyPath,autoIncrement:typeof r.autoIncrement!="undefined"&&!!r.autoIncrement});if(typeof r.indexes!="undefined"){for(var a=0;a<r.indexes.length;a++){o.createIndex(r.indexes[a].name,r.indexes[a].keyPath,{unique:!!r.indexes[a].unique})}}}}var u=null;length=t.objectStoreNames.length;for(var f=0;f<length;f++){u=false;for(var a=0;a<i;a++){r=n.oScheme[a];if(r.name==t.objectStoreNames[f]){u=true;continue}}if(!u){t.deleteObjectStore(t.objectStoreNames[f])}}}}}};n.indexedDB.checkDbObject=function(e){return typeof e=="object"};n.indexedDB.getObjectStore=function(e,t,r){if(!n.indexedDB.checkDbObject(e)){return}var o=e.transaction(t,r);return o.objectStore(t)};n.indexedDB.addValue=function(e,t,r,o,c){var i=null;try{i=n.indexedDB.getObjectStore(e,t,"readwrite").add(r,o)}catch(f){}i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};i.onsuccess=function(e){if(typeof c.callback=="function"){c.callback(e)}}};n.indexedDB.updateValue=function(e,t,r,o,c){var i=n.indexedDB.getObjectStore(e,t,"readwrite");var f=null;try{if(o){f=i.put(r,o)}else{f=i.put(r)}}catch(a){}f.onerror=function(e){if(typeof c!="undefined"&&typeof c.error=="function"){c.error(e)}};f.onsuccess=function(e){if(typeof c!="undefined"&&typeof c.callback=="function"){c.callback(e)}}};n.indexedDB.deleteValue=function(e,t,r,o){var c=n.indexedDB.getObjectStore(e,t,"readwrite")["delete"](r);c.onerror=function(e){if(typeof o!="undefined"&&typeof o.error=="function"){o.error(e)}};c.onsuccess=function(e){if(typeof o!="undefined"&&typeof o.callback=="function"){o.callback(e)}}};n.indexedDB.deleteValueByIndex=function(e,t,r,o,c){var i=null;try{i=n.indexedDB.getObjectStore(e,t,"readwrite").index(r).getKey(o)}catch(f){}i.onsuccess=function(r){var o=null;try{o=n.indexedDB.getObjectStore(e,t,"readwrite")["delete"](r.target.result);o.onsuccess=function(e){if(typeof c!="undefined"&&typeof c.callback=="function"){c.callback(e)}};o.onerror=function(e){if(typeof c!="undefined"&&typeof c.error=="function"){c.error(e)}}}catch(i){}};i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}}};n.indexedDB.getValue=function(e,t,r,o){var c=n.indexedDB.getObjectStore(e,t,"readonly").get(r);c.onerror=function(e){if(typeof o.error=="function"){o.error(e)}};c.onsuccess=function(e){if(typeof o.callback=="function"){o.callback(e.target.result)}}};n.indexedDB.getValueByIndex=function(e,t,r,o,c){var i=n.indexedDB.getObjectStore(e,t,"readonly").index(r).get(o);i.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};i.onsuccess=function(e){if(typeof c.callback=="function"){c.callback(e.target.result)}}};n.indexedDB.openCursor=function(t,r,o,c){var i=null;if(typeof o.lower!="undefined"){if(typeof o.upper!="undefined"){i=e.IDBKeyRange.bound(o.lower,o.upper,!!o.lowerOpen,!!o.upperOpen)}else{i=e.IDBKeyRange.lowerBound(o.lower,!!o.lowerOpen)}}else if(typeof o.upper!="undefined"){i=e.IDBKeyRange.upperBound(o.upper,!!o.upperOpen)}var f=n.indexedDB.getObjectStore(t,r,"readonly").openCursor(i);f.onerror=function(e){if(typeof c.error=="function"){c.error(e)}};f.onsuccess=function(e){if(typeof c.callback=="function"){var n=e.target.result;if(n){c.callback(n.value);n["continue"]()}}}}})(window);
//# sourceMappingURL=core_db_indexeddb.map.js