BX.LiveFeedClass=function(){var t=function(t){this.ajaxUrl="/bitrix/components/bitrix/lists.live.feed/ajax.php";this.socnetGroupId=t.socnetGroupId;this.randomString=t.randomString;this.listData=t.listData;var e=this;BX.addCustomEvent("onDisplayClaimLiveFeed",function(t){e.init(t)});if(this.listData){var s=[this.listData.ID,this.listData.NAME,this.listData.DESCRIPTION,this.listData.PICTURE,this.listData.CODE];window.SBPETabs.changePostFormTab("lists",s)}};t.prototype.init=function(t){if(t instanceof Array){var e=t[0],s=t[1],i=t[2],o=t[3],a=t[4];this.setPicture(o);this.setTitle(s);this.getList(e,i,a);this.isConstantsTuned(e)}};t.prototype.isConstantsTuned=function(t){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","isConstantsTuned"),data:{iblockId:t,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){BX("bx-lists-template-id").value=t.templateId;if(t.admin===true){this.setResponsible()}else if(t.admin===false){this.notifyAdmin();BX("bx-lists-cjeck-notify-admin").value=1}}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.setPicture=function(t){BX("bx-lists-table-td-title-img").innerHTML=t};t.prototype.setTitle=function(t){BX("bx-lists-table-td-title").innerHTML=BX.util.htmlspecialchars(t);BX("bx-lists-title-notify-admin-popup").value=BX.util.htmlspecialchars(t)};t.prototype.getList=function(t,e,s){var i=BX.findChildrenByClassName(BX("bx-lists-store-lists"),"bx-lists-input-list");for(var o=0;o<i.length;o++){if(i[o].value==t){this.show(BX("bx-lists-div-list-"+i[o].value))}else{this.hide(BX("bx-lists-div-list-"+i[o].value))}}BX("bx-lists-selected-list").value=t;if(BX("bx-lists-input-list-"+t)){return}BX.ajax({url:this.addToLinkParam(this.ajaxUrl,"action","getList"),method:"POST",dataType:"html",data:{iblockId:t,iblockDescription:e,iblockCode:s,socnetGroupId:this.socnetGroupId,randomString:this.randomString,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){BX("bx-lists-store-lists").appendChild(BX.create("input",{props:{id:"bx-lists-input-list-"+t,className:"bx-lists-input-list"},attrs:{type:"hidden",value:t}}));BX("bx-lists-total-div-id").appendChild(BX.create("div",{props:{id:"bx-lists-div-list-"+t,className:"bx-lists-div-list"},attrs:{style:"display: block;"}}));BX.adjust(BX("bx-lists-div-list-"+t),{html:e})},this)});BX.unbindAll(BX("blog-submit-button-save"));BX("blog-submit-button-save").setAttribute("onclick",'BX["LiveFeedClass_'+this.randomString+'"].submitForm();')};t.prototype.removeElement=function(t){return t.parentNode?t.parentNode.removeChild(t):t};t.prototype.addToLinkParam=function(t,e,s){if(!t.length){return"?"+e+"="+s}t=BX.util.remove_url_param(t,e);if(t.indexOf("?")!=-1){return t+"&"+e+"="+s}return t+"?"+e+"="+s};t.prototype.showModalWithStatusAction=function(t,e){t=t||{};if(!t.message){if(t.status=="success"){t.message=BX.message("LISTS_JS_STATUS_ACTION_SUCCESS")}else{t.message=BX.message("LISTS_JS_STATUS_ACTION_ERROR")+". "+this.getFirstErrorFromResponse(t)}}var s=BX.create("div",{props:{className:"bx-lists-alert"},children:[BX.create("span",{props:{className:"bx-lists-aligner"}}),BX.create("span",{props:{className:"bx-lists-alert-text"},text:t.message}),BX.create("div",{props:{className:"bx-lists-alert-footer"}})]});var i=BX.PopupWindowManager.getCurrentPopup();if(i){i.destroy()}var o=setTimeout(function(){var t=BX.PopupWindowManager.getCurrentPopup();if(!t||t.uniquePopupId!="bx-lists-status-action"){return}t.close();t.destroy()},3500);var a=BX.PopupWindowManager.create("bx-lists-status-action",null,{content:s,onPopupClose:function(){this.destroy();clearTimeout(o)},autoHide:true,zIndex:2e3,className:"bx-lists-alert-popup"});a.show();BX("bx-lists-status-action").onmouseover=function(t){clearTimeout(o)};BX("bx-lists-status-action").onmouseout=function(t){o=setTimeout(function(){var t=BX.PopupWindowManager.getCurrentPopup();if(!t||t.uniquePopupId!="bx-lists-status-action"){return}t.close();t.destroy()},3500)}};t.prototype.addNewTableRow=function(t,e,s,i){var o=document.getElementById(t);var a=o.rows.length;var n=o.insertRow(a);for(var r=0;r<e;r++){var l=n.insertCell(r);var d=o.rows[a-1].cells[r].innerHTML;l.innerHTML=d.replace(s,function(t){return t.replace("[n"+arguments[i]+"]","[n"+(1+parseInt(arguments[i]))+"]")})}};t.prototype.getNameInputFile=function(){var t=document.getElementsByClassName("bx-lists-input-file");for(var e=0;e<t.length;e++){var s=t[e].getElementsByTagName("input");for(var i=0;i<s.length;i++){s[i].onchange=getName}}};t.prototype.createAdditionalHtmlEditor=function(t,e,s){var i=document.getElementById(t);var o=i.rows.length;var a=i.insertRow(o);var n=a.insertCell(0);var r=i.rows[o-1].cells[0].innerHTML;var l=0;while(true){var d=r.indexOf("[n",l);if(d<0)break;var p=r.indexOf("]",d);if(p<0)break;var u=parseInt(r.substr(d+2,p-d));r=r.substr(0,d)+"[n"+ ++u+"]"+r.substr(p+1);l=d+1}var l=0;while(true){var d=r.indexOf("__n",l);if(d<0)break;var p=r.indexOf("_",d+2);if(p<0)break;var u=parseInt(r.substr(d+3,p-d));r=r.substr(0,d)+"__n"+ ++u+"_"+r.substr(p+1);l=p+1}n.innerHTML=r;var c="id_"+e+"__n"+o+"_";var m=e+"[n"+o+"][VALUE]";window.BXHtmlEditor.Show({id:c,inputName:m,name:m,content:"",width:"100%",height:"200",allowPhp:false,limitPhpAccess:false,templates:[],templateId:"",templateParams:[],componentFilter:"",snippets:[],placeholder:"Text here...",actionUrl:"/bitrix/tools/html_editor_action.php",cssIframePath:"/bitrix/js/fileman/html_editor/iframe-style.css?1412693817",bodyClass:"",bodyId:"",spellcheck_path:"/bitrix/js/fileman/html_editor/html-spell.js?v=1412693817",usePspell:"N",useCustomSpell:"Y",bbCode:false,askBeforeUnloadPage:false,settingsKey:"user_settings_1",showComponents:true,showSnippets:true,view:"wysiwyg",splitVertical:false,splitRatio:"1",taskbarShown:false,taskbarWidth:"250",lastSpecialchars:false,cleanEmptySpans:true,lazyLoad:false,showTaskbars:false,showNodeNavi:false,controlsMap:[{id:"Bold",compact:true,sort:"80"},{id:"Italic",compact:true,sort:"90"},{id:"Underline",compact:true,sort:"100"},{id:"Strikeout",compact:true,sort:"110"},{id:"RemoveFormat",compact:true,sort:"120"},{id:"Color",compact:true,sort:"130"},{id:"FontSelector",compact:false,sort:"135"},{id:"FontSize",compact:false,sort:"140"},{separator:true,compact:false,sort:"145"},{id:"OrderedList",compact:true,sort:"150"},{id:"UnorderedList",compact:true,sort:"160"},{id:"AlignList",compact:false,sort:"190"},{separator:true,compact:false,sort:"200"},{id:"InsertLink",compact:true,sort:"210",wrap:"bx-htmleditor-"+s},{id:"InsertImage",compact:false,sort:"220"},{id:"InsertVideo",compact:true,sort:"230",wrap:"bx-htmleditor-"+s},{id:"InsertTable",compact:false,sort:"250"},{id:"Code",compact:true,sort:"260"},{id:"Quote",compact:true,sort:"270",wrap:"bx-htmleditor-"+s},{id:"Smile",compact:false,sort:"280"},{separator:true,compact:false,sort:"290"},{id:"Fullscreen",compact:false,sort:"310"},{id:"BbCode",compact:true,sort:"340"},{id:"More",compact:true,sort:"400"}],autoResize:true,autoResizeOffset:"40",minBodyWidth:"350",normalBodyWidth:"555"});var b=BX.findChildrenByClassName(BX(t),"bx-html-editor");for(var h in b){var f=b[h].getAttribute("id");var B=BX.findChildrenByClassName(BX(f),"bx-editor-iframe");if(B.length>1){for(var X=0;X<B.length-1;X++){B[X].parentNode.removeChild(B[X])}}}};t.prototype.createSettingsDropdown=function(t){BX.PreventDefault(t);BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","createSettingsDropdown"),data:{iblockId:BX("bx-lists-selected-list").value,randomString:this.randomString,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){var e=BX.PopupMenu.getMenuById("settings-lists");if(e&&e.popupWindow){if(e.popupWindow.isShown()){BX.PopupMenu.destroy("settings-lists");return}}BX.PopupMenu.show("settings-lists",BX("bx-lists-settings-btn"),t.settingsDropdown,{autoHide:true,offsetTop:0,offsetLeft:0,angle:{offset:15},events:{onPopupClose:function(){}}})}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.setDelegateResponsible=function(){if(BX.PopupWindowManager.getCurrentPopup()){BX.PopupWindowManager.getCurrentPopup().close()}var t=this.hide,e=this.addToLinkParam,s=this.showModalWithStatusAction,i=this.ajaxUrl;BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","checkDelegateResponsible"),data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(o){if(o.status=="success"){this.show(BX("feed-add-lists-right"));this.modalWindow({modalId:"bx-lists-popup",title:BX.message("LISTS_SELECT_STAFF_SET_RIGHT"),overlay:false,autoHide:true,contentStyle:{width:"600px",paddingTop:"10px",paddingBottom:"10px"},content:[BX("feed-add-lists-right")],events:{onPopupClose:function(){t(BX("feed-add-lists-right"));BX("bx-lists-total-div-id").appendChild(BX("feed-add-lists-right"));this.destroy()},onAfterPopupShow:function(t){var e=BX.findChild(t.contentContainer,{"class":"bx-lists-popup-title"},true);if(e){e.style.cursor="move";BX.bind(e,"mousedown",BX.proxy(t._startDrag,t))}BX.PopupMenu.destroy("settings-lists")}},buttons:[BX.create("a",{text:BX.message("LISTS_SAVE_BUTTON_SET_RIGHT"),props:{className:"webform-small-button webform-small-button-accept"},events:{click:BX.delegate(function(t){var o=BX.findChildrenByClassName(BX("feed-add-post-lists-item"),"feed-add-post-lists"),a=[];for(var n=0;n<o.length;n++){a.push(o[n].getAttribute("data-id"))}BX.ajax({method:"POST",dataType:"json",url:e(i,"action","setDelegateResponsible"),data:{iblockId:BX("bx-lists-selected-list").value,selectUsers:a,sessid:BX.bitrix_sessid()},onsuccess:function(t){if(t.status=="success"){BX.PopupWindowManager.getCurrentPopup().close();s({status:"success",message:t.message})}else{BX.PopupWindowManager.getCurrentPopup().close();t.errors=t.errors||[{}];s({status:"error",message:t.errors.pop().message})}}})},this)}}),BX.create("a",{text:BX.message("LISTS_CANCEL_BUTTON_SET_RIGHT"),props:{className:"webform-small-button webform-button-cancel"},events:{click:BX.delegate(function(t){BX.PopupWindowManager.getCurrentPopup().close()},this)}})]});for(var a in o.listUser){var n=BX.findChildrenByClassName(BX("feed-add-post-lists-item"),"feed-add-post-lists");for(var r in n){if(o.listUser[a].id==n[r].getAttribute("data-id")){delete o.listUser[a]}}BXfpListsSelectCallback(o.listUser[a])}}else{o.errors=o.errors||[{}];this.showModalWithStatusAction({status:"error",message:o.errors.pop().message})}},this)})};t.prototype.jumpSettingProcess=function(){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","checkPermissions"),data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){document.location.href=BX("bx-lists-lists-page").value+BX("bx-lists-selected-list").value+"/edit/"}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.jumpProcessDesigner=function(){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","getBizprocTemplateId"),data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){document.location.href=BX("bx-lists-lists-page").value+BX("bx-lists-selected-list").value+"/bp_edit/"+t.templateId+"/"}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.notify=function(t){BX("bx-lists-notify-button-"+t).setAttribute("onclick","");var e="/",s=null;if(BX("bx-lists-select-site-dir")){e=BX("bx-lists-select-site-dir").value}if(BX("bx-lists-select-site-id")){s=BX("bx-lists-select-site-id").value}BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","notifyAdmin"),data:{iblockId:BX("bx-lists-selected-list").value,iblockName:BX("bx-lists-title-notify-admin-popup").value,userId:t,siteDir:e,siteId:s,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){if(e.status=="success"){this.removeElement(BX("bx-lists-notify-button-"+t));BX("bx-lists-notify-success-"+t).innerHTML=e.message}else{BX("bx-lists-notify-button-"+t).setAttribute("onclick",'BX["LiveFeedClass_'+this.randomString+'"].notify('+t+")");e.errors=e.errors||[{}];this.showModalWithStatusAction({status:"error",message:e.errors.pop().message})}},this)})};t.prototype.notifyAdmin=function(){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","getListAdmin"),data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){var e='<span class="bp-question"><span>!</span>'+BX.message("LISTS_NOTIFY_ADMIN_TITLE_WHY").replace("#NAME_PROCESSES#",BX("bx-lists-title-notify-admin-popup").value)+"</span>";e+="<p>"+BX.message("LISTS_NOTIFY_ADMIN_TEXT_ONE").replace("#NAME_PROCESSES#",BX("bx-lists-title-notify-admin-popup").value)+"</p>";e+="<p>"+BX.message("LISTS_NOTIFY_ADMIN_TEXT_TWO").replace("#NAME_PROCESSES#",BX("bx-lists-title-notify-admin-popup").value)+"</p>";e+='<span class="bp-question-title">'+BX.message("LISTS_NOTIFY_ADMIN_MESSAGE")+"</span>";for(var s in t.listAdmin){var i="";if(t.listAdmin[s].img){i='<img src="'+t.listAdmin[s].img+'" alt="">'}e+='<div class="bp-question-item"><a href="#" class="bp-question-item-avatar"><span class="bp-question-item-avatar-inner">'+i+'</span></a><span class="bp-question-item-info"><span>'+t.listAdmin[s].name+"</span></span>"+'<span id="bx-lists-notify-success-'+t.listAdmin[s].id+'" class="bx-lists-notify-success"></span>'+'<a id="bx-lists-notify-button-'+t.listAdmin[s].id+'" href="#" onclick=\'BX["LiveFeedClass_'+this.randomString+'"].notify('+t.listAdmin[s].id+');\' class="webform-small-button bp-small-button webform-small-button-blue">'+""+BX.message("LISTS_NOTIFY_ADMIN_MESSAGE_BUTTON")+"</a></div>"}BX("bx-lists-notify-admin-popup-content").innerHTML=e;this.modalWindow({modalId:"bx-lists-popup",title:BX("bx-lists-title-notify-admin-popup").value,overlay:false,contentStyle:{width:"600px",paddingTop:"10px",paddingBottom:"10px"},content:[BX("bx-lists-notify-admin-popup-content")],events:{onPopupClose:function(){BX("bx-lists-notify-admin-popup").appendChild(BX("bx-lists-notify-admin-popup-content"));this.destroy()},onAfterPopupShow:function(t){var e=BX.findChild(t.contentContainer,{"class":"bx-lists-popup-title"},true);if(e){e.style.cursor="move";BX.bind(e,"mousedown",BX.proxy(t._startDrag,t))}BX.PopupMenu.destroy("settings-lists")}},buttons:[BX.create("a",{text:BX.message("LISTS_CANCEL_BUTTON_CLOSE"),props:{className:"webform-small-button webform-button-cancel"},events:{click:BX.delegate(function(t){BX.PopupWindowManager.getCurrentPopup().close()},this)}})]})}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}},this)})};t.prototype.setResponsible=function(){if(BX.PopupWindowManager.getCurrentPopup()){BX.PopupWindowManager.getCurrentPopup().close()}BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","checkPermissions"),data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.status=="success"){BX.ajax({url:this.addToLinkParam(this.ajaxUrl,"action","setResponsible"),method:"POST",dataType:"html",data:{iblockId:BX("bx-lists-selected-list").value,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){BX.adjust(BX("bx-lists-set-responsible-content"),{html:t})},this)});this.modalWindow({modalId:"bx-lists-popup",title:BX.message("LISTS_SELECT_STAFF_SET_RESPONSIBLE"),overlay:false,contentStyle:{width:"600px",paddingTop:"10px",paddingBottom:"10px"},content:[BX("bx-lists-set-responsible-content")],events:{onPopupClose:function(){BX("bx-lists-set-responsible").appendChild(BX("bx-lists-set-responsible-content"));this.destroy()},onAfterPopupShow:function(t){var e=BX.findChild(t.contentContainer,{"class":"bx-lists-popup-title"},true);if(e){e.style.cursor="move";BX.bind(e,"mousedown",BX.proxy(t._startDrag,t))}BX.PopupMenu.destroy("settings-lists")}},buttons:[BX.create("a",{text:BX.message("LISTS_SAVE_BUTTON_SET_RIGHT"),props:{className:"webform-small-button webform-small-button-accept"},events:{click:BX.delegate(function(t){var e=BX.findChild(BX("bx-lists-set-responsible-content"),{tag:"FORM"},true);if(e)e.onsubmit(e,t)})}}),BX.create("a",{text:BX.message("LISTS_CANCEL_BUTTON_SET_RIGHT"),props:{className:"webform-small-button webform-button-cancel"},events:{click:BX.delegate(function(t){BX.PopupWindowManager.getCurrentPopup().close()},this)}})]})}else{if(BX("bx-lists-cjeck-notify-admin").value){this.notifyAdmin()}else{t.errors=t.errors||[{}];this.showModalWithStatusAction({status:"error",message:t.errors.pop().message})}}},this)})};t.prototype.show=function(t){if(this.getRealDisplay(t)!="none")return;var e=t.getAttribute("displayOld");t.style.display=e||"";if(this.getRealDisplay(t)==="none"){var s=t.nodeName,i=document.body,o;if(displayCache[s]){o=displayCache[s]}else{var a=document.createElement(s);i.appendChild(a);o=this.getRealDisplay(a);if(o==="none"){o="block"}i.removeChild(a);displayCache[s]=o}t.setAttribute("displayOld",o);t.style.display=o}};t.prototype.hide=function(t){if(!t.getAttribute("displayOld")){t.setAttribute("displayOld",t.style.display)}t.style.display="none"};t.prototype.getRealDisplay=function(t){if(t.currentStyle){return t.currentStyle.display}else if(window.getComputedStyle){var e=window.getComputedStyle(t,null);return e.getPropertyValue("display")}};t.prototype.modalWindow=function(t){t=t||{};t.title=t.title||false;t.bindElement=t.bindElement||null;t.overlay=typeof t.overlay=="undefined"?true:t.overlay;t.autoHide=t.autoHide||false;t.closeIcon=typeof t.closeIcon=="undefined"?{right:"20px",top:"10px"}:t.closeIcon;t.modalId=t.modalId||"lists_modal_window_"+(Math.random()*(2e5-100)+100);t.withoutContentWrap=typeof t.withoutContentWrap=="undefined"?false:t.withoutContentWrap;t.contentClassName=t.contentClassName||"";t.contentStyle=t.contentStyle||{};t.content=t.content||[];t.buttons=t.buttons||false;t.events=t.events||{};t.withoutWindowManager=!!t.withoutWindowManager||false;var e=[];if(t.title){e.push(BX.create("div",{props:{className:"bx-lists-popup-title"},text:t.title}))}if(t.withoutContentWrap){e=e.concat(t.content)}else{e.push(BX.create("div",{props:{className:"bx-lists-popup-content "+t.contentClassName},style:t.contentStyle,children:t.content}))}var s=[];if(t.buttons){for(var i in t.buttons){if(!t.buttons.hasOwnProperty(i)){continue}if(i>0){s.push(BX.create("SPAN",{html:"&nbsp;"}))}s.push(t.buttons[i])}e.push(BX.create("div",{props:{className:"bx-lists-popup-buttons"},children:s}))}var o=BX.create("div",{props:{className:"bx-lists-popup-container"},children:e});t.events.onPopupShow=BX.delegate(function(){if(s.length){firstButtonInModalWindow=s[0];BX.bind(document,"keydown",BX.proxy(this._keyPress,this))}if(t.events.onPopupShow)BX.delegate(t.events.onPopupShow,BX.proxy_context)},this);var a=t.events.onPopupClose;t.events.onPopupClose=BX.delegate(function(){firstButtonInModalWindow=null;try{BX.unbind(document,"keydown",BX.proxy(this._keypress,this))}catch(e){}if(a){BX.delegate(a,BX.proxy_context)()}if(t.withoutWindowManager){delete windowsWithoutManager[t.modalId]}BX.proxy_context.destroy()},this);var n;if(t.withoutWindowManager){if(!!windowsWithoutManager[t.modalId]){return windowsWithoutManager[t.modalId]}n=new BX.PopupWindow(t.modalId,t.bindElement,{content:o,closeByEsc:true,closeIcon:t.closeIcon,autoHide:t.autoHide,overlay:t.overlay,events:t.events,buttons:[],zIndex:isNaN(t["zIndex"])?0:t.zIndex});windowsWithoutManager[t.modalId]=n}else{n=BX.PopupWindowManager.create(t.modalId,t.bindElement,{content:o,closeByEsc:true,closeIcon:t.closeIcon,autoHide:t.autoHide,overlay:t.overlay,events:t.events,buttons:[],zIndex:isNaN(t["zIndex"])?0:t.zIndex})}n.show();return n};t.prototype.submitForm=function(){if(this.getRealDisplay(BX("feed-add-post-content-lists"))=="none")BX.bind(BX("blog-submit-button-save"),"click",submitBlogPostForm());BX("blog-submit-button-save").setAttribute("onclick","");BX.addClass(BX("blog-submit-button-save"),"feed-add-button-load");var t=BX.findChildrenByClassName(BX("bx-lists-store-lists"),"bx-lists-input-list");for(var e=0;e<t.length;e++){if(t[e].value!=BX("bx-lists-selected-list").value){this.removeElement(BX("bx-lists-div-list-"+t[e].value));this.removeElement(BX("bx-lists-input-list-"+t[e].value))}}BX.ajax.submitAjax(BX("blogPostForm"),{method:"POST",url:this.addToLinkParam(this.ajaxUrl,"action","checkDataElementCreation"),processData:true,onsuccess:BX.delegate(function(t){t=BX.parseJSON(t,{});if(t.status=="success"){BX.bind(BX("blog-submit-button-save"),"click",submitBlogPostForm())}else{BX.removeClass(BX("blog-submit-button-save"),"feed-add-button-load");BX("bx-lists-block-errors").innerHTML=t.errors.pop().message;this.show(BX("bx-lists-block-errors"));BX("blog-submit-button-save").setAttribute("onclick",'BX["LiveFeedClass_'+this.randomString+'"].submitForm();')}},this)})};t.prototype.errorPopup=function(t){this.showModalWithStatusAction({status:"error",message:t})};return t}();
//# sourceMappingURL=script.map.js