(function(){if(BX.ImMobile)return;BX.ImMobile=function(e){BX.browser.addGlobalClass();if(typeof BX.message("USER_TZ_AUTO")=="undefined"||BX.message("USER_TZ_AUTO")=="Y")BX.message({USER_TZ_OFFSET:-(new Date).getTimezoneOffset()*60-parseInt(BX.message("SERVER_TZ_OFFSET"))});if(typeof BX.MessengerCommon!="undefined")BX.MessengerCommon.setBxIm(this);this.mobileVersion=true;this.mobileAction=e.mobileAction?e.mobileAction:"none";this.revision=2;this.errorMessage="";this.bitrixNetworkStatus=e.bitrixNetworkStatus||false;this.bitrix24Status=e.bitrix24Status||false;this.bitrix24Admin=e.bitrix24Admin||false;this.bitrixIntranet=e.bitrixIntranet||false;this.bitrix24net=e.bitrix24net||false;this.bitrixXmpp=e.bitrixXmpp||false;this.ppStatus=e.ppStatus||false;this.ppServerStatus=this.ppStatus?e.ppServerStatus:false;this.updateStateInterval=e.updateStateInterval||90;this.desktopStatus=e.desktopStatus||false;this.desktopVersion=e.desktopVersion||0;this.xmppStatus=false;this.lastRecordId=0;this.userId=e.userId;this.userEmail=e.userEmail||"";this.path=e.path||{};this.language=e.language||"en";this.init=typeof e.init!="undefined"?e.init:true;this.tryConnect=true;this.animationSupport=true;this.keyboardShow=false;this.sendAjaxTry=0;this.pathToRoot=BX.message("MobileSiteDir")?BX.message("MobileSiteDir"):"/";this.pathToAjax=this.pathToRoot+"mobile/ajax.php?mobile_action=im&";this.pathToFileAjax=this.pathToAjax+"upload&";this.pathToBlankImage="/bitrix/js/im/images/blank.gif";this.notifyCount=e.notifyCount||0;this.messageCount=e.messageCount||0;this.messageCountArray={};this.settings=e.settings||{};this.settingsNotifyBlocked=e.settingsNotifyBlocked||{};this.timeoutUpdateCounters=null;this.timeoutUpdateStateLight=null;e.notify=e.notify||{};e.notify=e.message||{};e.notify=e.recent||{};for(var t in e.notify){e.notify[t].date=parseInt(e.notify[t].date)+parseInt(BX.message("USER_TZ_OFFSET"));if(parseInt(t)>this.lastRecordId)this.lastRecordId=parseInt(t)}for(var t in e.message){e.message[t].date=parseInt(e.message[t].date)+parseInt(BX.message("USER_TZ_OFFSET"));if(parseInt(t)>this.lastRecordId)this.lastRecordId=parseInt(t)}for(var t in e.recent){e.recent[t].date=parseInt(e.recent[t].date)+parseInt(BX.message("USER_TZ_OFFSET"))}this.notify=new BX.ImNotifyMobile(this,{counters:e.counters||{},notify:e.notify||{},unreadNotify:e.unreadNotify||{},flashNotify:e.flashNotify||{},countNotify:e.countNotify||0,loadNotify:e.loadNotify||false});this.disk=new BX.ImDiskManagerMobile(this,{notifyClass:this.notify,files:e.files||{},enable:e.disk&&e.disk.enable});this.notify.disk=this.disk;this.messenger=new BX.ImMessengerMobile(this,{updateStateInterval:e.updateStateInterval,notifyClass:this.notify,diskClass:this.disk,recent:e.recent||{},users:e.users||{},groups:e.groups||{},userChatBlockStatus:e.userChatBlockStatus||{},userInGroup:e.userInGroup||{},woGroups:e.woGroups||{},woUserInGroup:e.woUserInGroup||{},currentTab:e.currentTab||0,chat:e.chat||{},userInChat:e.userInChat||{},userChat:e.userChat||{},hrphoto:e.hrphoto||{},message:e.message||{},showMessage:e.showMessage||{},unreadMessage:e.unreadMessage||{},flashMessage:e.flashMessage||{},countMessage:e.countMessage||0,smile:e.smile||false,smileSet:e.smileSet||false,history:e.history||{}});this.notify.messenger=this.messenger;this.disk.messenger=this.messenger;this.webrtc=e.webrtc||{};this.messenger.webrtc=this.webrtc;if(this.init){BX.onCustomEvent(window,"onImMobileInit",[this]);app.pullDownLoadingStop();this.mobileActionPrepare(e)}BX.addCustomEvent("onFrameDataProcessed",BX.delegate(function(e,t){for(var s=0;s<e.length;s++){if(e[s]["ID"].indexOf("im_component_")>=0){if(!t){this.mobileActionReady()}else{this.mobileActionFromCache()}}}},this))};BX.ImMobile.prototype.mobileActionPrepare=function(e){if(this.mobileAction=="RECENT"){this.messenger.drawRecentList()}else if(this.mobileAction=="INIT"){this.initPageAction()}else if(this.mobileAction=="DIALOG"){this.dialogPageAction(e)}};BX.ImMobile.prototype.mobileActionFromCache=function(){BX.addClass(document.body,"im-page-from-cache");if(this.mobileAction=="DIALOG"){this.messenger.currentTab=0;this.messenger.openChatFlag=false;this.messenger.openCallFlag=false;this.messenger.showMessage={};this.messenger.unreadMessage={}}};BX.ImMobile.prototype.mobileActionReady=function(){BX.removeClass(document.body,"im-page-from-cache");BX.MessengerCommon.pullEvent();if(this.mobileAction=="RECENT"){BX.addCustomEvent("onImDialogOpen",BX.delegate(function(e){this.messenger.openMessenger(e.id,false,false)},this));BX.addCustomEvent("onImDialogClose",BX.delegate(function(e){this.messenger.closeMessenger(e.id)},this))}else if(this.mobileAction=="DIALOG"){BX.addCustomEvent("onOpenPageAfter",BX.delegate(function(){BX.MessengerCommon.readMessage(this.messenger.currentTab);app.onCustomEvent("onImDialogOpen",{id:this.messenger.currentTab})},this));BX.addCustomEvent("onHidePageBefore",BX.delegate(function(){app.onCustomEvent("onImDialogClose",{id:this.messenger.currentTab})},this));BXMobileApp.UI.Page.TextPanel.setUseImageButton(true);BXMobileApp.UI.Page.TextPanel.setParams({callback:BX.delegate(function(e){if(e.event&&e.event=="onKeyPress"){if(BX.util.trim(e.text).length>2){BX.MessengerCommon.sendWriting(this.messenger.currentTab)}this.messenger.textareaHistory[this.messenger.currentTab]=e.text}},this),placeholder:BX.message("IM_M_TEXTAREA"),button_name:BX.message("IM_M_MESSAGE_SEND"),plusAction:!this.disk.enable?"":BX.delegate(function(){this.messenger.takePhotoMenu()},this),action:BX.delegate(function(e){this.messenger.textareaHistory[this.messenger.currentTab]="";this.messenger.sendMessage(this.messenger.currentTab,e);app.clearInput()},this)});BXMobileApp.UI.Page.TextPanel.show();app.enableCaptureKeyboard(true);BX.bind(window,"orientationchange",BX.delegate(function(){if(this.messenger.popupMessengerBody.scrollHeight-this.messenger.popupMessengerBody.scrollTop<window.screen.height)this.messenger.autoScroll()},this));BX.addCustomEvent("onKeyboardWillShow",BX.delegate(function(){this.keyboardShow=true;this.messenger.autoScroll()},this));BX.addCustomEvent("onKeyboardDidHide",BX.delegate(function(){this.keyboardShow=false},this));app.pullDown({enable:true,pulltext:BX.message("IM_M_DIALOG_PULLTEXT"),downtext:BX.message("IM_M_DIALOG_DOWNTEXT"),loadtext:BX.message("IM_M_DIALOG_LOADTEXT"),callback:BX.delegate(function(){BX.MessengerCommon.loadHistory(this.messenger.currentTab)},this)});BX.addCustomEvent("onPageParamsChanged",BX.delegate(function(e){this.messenger.openMessenger(e.dialogId)},this));if(BXMobileApp.apiVersion==1){this.messenger.openMessenger(this.messenger.currentTab)}else{BXMobileApp.UI.Page.params.get({callback:BX.delegate(function(e){this.messenger.openMessenger(e.dialogId)},this)})}BX.bindDelegate(this.messenger.popupMessengerBodyWrap,"click",{className:"bx-messenger-content-item-avatar-button"},BX.delegate(function(e){BX.localStorage.set("impmh",true,1);var t=BX.proxy_context.parentNode.parentNode.getAttribute("data-senderId");this.messenger.messageReply(t);return BX.PreventDefault(e)},this));BX.adjust(BX("im-dialog-form"),{children:[this.messenger.popupMessengerFileForm=BX.create("form",{attrs:{action:this.pathToFileAjax},props:{className:"bx-messenger-textarea-file-form"},children:[BX.create("input",{attrs:{type:"hidden",name:"IM_FILE_UPLOAD",value:"Y"}}),this.messenger.popupMessengerFileFormChatId=BX.create("input",{attrs:{type:"hidden",name:"CHAT_ID",value:0}}),this.messenger.popupMessengerFileFormRegChatId=BX.create("input",{attrs:{type:"hidden",name:"REG_CHAT_ID",value:0}}),this.messenger.popupMessengerFileFormRegMessageId=BX.create("input",{attrs:{type:"hidden",name:"REG_MESSAGE_ID",value:0}}),this.messenger.popupMessengerFileFormRegParams=BX.create("input",{attrs:{type:"hidden",name:"REG_PARAMS",value:""}}),BX.create("input",{attrs:{type:"hidden",name:"IM_AJAX_CALL",value:"Y"}}),this.messenger.popupMessengerFileFormInput=BX.create("input",{attrs:{type:"hidden",name:"FAKE_INPUT",value:"Y"}})]})]});this.disk.chatDialogInit();BX.bindDelegate(this.messenger.popupMessengerBodyWrap,"click",{className:"bx-messenger-content-item-like"},BX.delegate(function(e){var t=BX.proxy_context.parentNode.parentNode.parentNode.parentNode.getAttribute("data-blockmessageid");BX.MessengerCommon.messageLike(t);BX.localStorage.set("impmh",true,1);return BX.PreventDefault(e)},this));BX.bindDelegate(this.messenger.popupMessengerBodyWrap,"click",{tagName:"a"},BX.delegate(function(e){BX.localStorage.set("impmh",true,1)},this));BX.bindDelegate(this.messenger.popupMessengerBodyWrap,"click",{className:"bx-messenger-content-item-content"},BX.delegate(function(e){var t=BX.proxy_context.parentNode.getAttribute("data-blockmessageid");this.messenger.openMessageMenu(t)},this));BX.bindDelegate(this.messenger.popupMessengerBodyWrap,"click",{className:"bx-messenger-content-item-error"},BX.delegate(function(){BX.localStorage.set("impmh",true,1);BX.MessengerCommon.sendMessageRetry();return BX.PreventDefault(e)},this))}};BX.ImMobile.prototype.initPageAction=function(e){BX.addCustomEvent("UIApplicationDidBecomeActiveNotification",BX.delegate(function(e){setTimeout(BX.delegate(this.updateStateLight,this),1e3)},this));BX.addCustomEvent("onImError",BX.delegate(function(e){if(e.error=="AUTHORIZE_ERROR"){app.BasicAuth({success:BX.delegate(function(){setTimeout(BX.delegate(this.updateStateLight,this),1e3)},this)})}else if(e.error=="RECENT_RELOAD"){app.BasicAuth({success:BX.delegate(function(){setTimeout(BX.delegate(this.updateStateLight,this),1e3)},this)})}},this));BX.addCustomEvent("onPullEvent-im",BX.delegate(function(e,t){if(e=="readMessage"){this.messageCountArray[t.userId]=0;this.updateCounter()}else if(e=="readMessageChat"){this.messageCountArray["chat"+t.chatId]=0;this.updateCounter()}else if(e=="chatUserLeave"){if(t.userId==BX.message("USER_ID")){this.messageCountArray["chat"+t.chatId]=0;this.updateCounter()}}else if(e=="readNotify"){this.notify.notifyLastId=parseInt(t.lastId);this.notifyCount=0;this.updateCounter()}else if(e=="message"||e=="messageChat"){var s=t.MESSAGE.senderId;if(s==BX.message("USER_ID")){this.messageCountArray[t.MESSAGE.recipientId]=0;this.updateCounter();return}if(e=="messageChat")s=t.MESSAGE.recipientId;if(typeof this.messageCountArray[s]!="undefined")this.messageCountArray[s]++;else this.messageCountArray[s]=1;app.getVar({"var":"PAGE_ID",from:"current",callback:BX.delegate(function(e){if(e=="DIALOG"+s)this.messageCountArray[s]=0;this.updateCounter()},this)})}else if(e=="notify"){lastId=parseInt(t.id);if(this.notify.notifyLastId<lastId)this.notify.notifyLastId=lastId;this.notifyCount++;this.updateCounter();if(!this.notify.notifyLoadFlag){clearTimeout(this.notifyTimeout);this.notifyTimeout=setTimeout(BX.delegate(function(){this.notify.notifyLoadFlag=true;app.refreshPanelPage("notifications")},this),600)}}},this));BX.addCustomEvent("onNotificationsLastId",BX.delegate(function(e){this.notify.notifyLoadFlag=false;e=parseInt(e);if(this.notify.notifyLastId<e)this.notify.notifyLastId=e},this));BX.addCustomEvent("onImDialogOpen",BX.delegate(function(e){this.messageCountArray[e.id]=0;this.updateCounter()},this));BX.addCustomEvent("onNotificationsOpen",BX.delegate(function(e){this.notify.notifyViewedWait()},this));BX.addCustomEvent("onOpenPush",BX.delegate(function(e){if(!(app.enableInVersion(2)&&typeof e=="object"&&typeof e.params=="string"))return false;if(e.params.substr(0,8)=="IM_MESS_"){var t=parseInt(e.params.substr(8));if(t>0){BXMobileApp.PageManager.loadPageUnique({url:this.pathToRoot+"mobile/im/dialog.php"+(!app.enableInVersion(11)?"?id="+t:""),bx24ModernStyle:true,data:{dialogId:t}})}}else if(e.params.substr(0,6)=="IMINV_"){var s=e.params.split("_");var t=parseInt(s[1]);var i=parseInt(s[2]);if(!mwebrtc.timesUp(i*1e3)){mwebrtc.callInvite(t)}}},this));app.setPanelPages({messages_page:this.pathToRoot+"mobile/im/index.php?NEW",messages_open_empty:true,notifications_page:this.pathToRoot+"mobile/im/notify.php",notifications_open_empty:true});this.updateStateLight()};BX.ImMobile.prototype.dialogPageAction=function(e){this.messenger.popupMessengerBody=document.body;this.messenger.popupMessengerBodyWrap=BX("im-dialog-wrap");BX.addClass(this.messenger.popupMessengerBodyWrap,"bx-messenger-dialog-wrap");this.messenger.dialogOpen=true};BX.ImMobile.prototype.updateStateLight=function(){clearTimeout(this.timeoutUpdateStateLight);this.timeoutUpdateStateLight=setTimeout(BX.delegate(function(){BX.ajax({url:this.pathToAjax,method:"POST",dataType:"json",skipAuthCheck:true,timeout:20,data:{IM_UPDATE_STATE_LIGHT:"Y",MOBILE:"Y",SITE_ID:BX.message("SITE_ID"),NOTIFY:"Y",MESSAGE:"Y",IM_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){if(e.ERROR.length==0){BX.message({SERVER_TIME:e.SERVER_TIME});if(BX.PULL&&e.PULL_CONFIG){BX.PULL.updateChannelID({METHOD:e.PULL_CONFIG.METHOD,CHANNEL_ID:e.PULL_CONFIG.CHANNEL_ID,CHANNEL_DT:e.PULL_CONFIG.CHANNEL_DT,PATH:e.PULL_CONFIG.PATH,LAST_ID:e.PULL_CONFIG.LAST_ID,PATH_WS:e.PULL_CONFIG.PATH_WS})}if(e.COUNTER_MESSAGES)this.messageCount=parseInt(e.COUNTER_MESSAGES);if(e.COUNTER_NOTIFICATIONS)this.notifyCount=parseInt(e.COUNTER_NOTIFICATIONS);if(e.NOTIFY_LAST_ID)this.notify.notifyLastId=parseInt(e.NOTIFY_LAST_ID);if(this.messageCount>0&&e.COUNTER_UNREAD_MESSAGES&&typeof e.COUNTER_UNREAD_MESSAGES=="object"){this.messageCount=0;this.messageCountArray={};for(var t in e.COUNTER_UNREAD_MESSAGES){this.messageCount+=e.COUNTER_UNREAD_MESSAGES[t].MESSAGE.counter;this.messageCountArray[t]=e.COUNTER_UNREAD_MESSAGES[t].MESSAGE.counter}BX.onCustomEvent("onUpdateUserCounters",[e.COUNTER_UNREAD_MESSAGES]);BXMobileApp.onCustomEvent("onUpdateUserCounters",e.COUNTER_UNREAD_MESSAGES)}else{this.messageCountArray={};BX.onCustomEvent("onUpdateUserCounters",[e.COUNTER_UNREAD_MESSAGES]);BXMobileApp.onCustomEvent("onUpdateUserCounters",e.COUNTER_UNREAD_MESSAGES)}this.updateCounter();if(e.COUNTERS&&typeof e.COUNTERS=="object"){BX.onCustomEvent("onImUpdateCounter",[e.COUNTERS]);BXMobileApp.onCustomEvent("onImUpdateCounter",e.COUNTERS)}if(this.notifyCount>0&&!this.notify.notifyLoadFlag){clearTimeout(this.notifyTimeout);this.notifyTimeout=setTimeout(BX.delegate(function(){this.notify.notifyLoadFlag=true;app.refreshPanelPage("notifications")},this),600)}this.sendAjaxTry=0;if(BX.PULL){if(!BX.PULL.tryConnect()){BX.PULL.updateState(true)}}clearTimeout(this.timeoutUpdateStateLight);this.timeoutUpdateStateLight=setTimeout(BX.delegate(function(){this.updateStateLight()},this),8e4)}else if(e.ERROR=="AUTHORIZE_ERROR"&&this.sendAjaxTry<=3){this.sendAjaxTry++;BX.onCustomEvent("onImError",[{error:e.ERROR}]);BXMobileApp.onCustomEvent("onImError",{error:e.ERROR});clearTimeout(this.timeoutUpdateStateLight);this.timeoutUpdateStateLight=setTimeout(BX.delegate(function(){this.updateStateLight()},this),2e3)}else if(e.ERROR=="SESSION_ERROR"&&this.sendAjaxTry<=3){this.sendAjaxTry++;BX.message({bitrix_sessid:e.BITRIX_SESSID});clearTimeout(this.timeoutUpdateStateLight);this.timeoutUpdateStateLight=setTimeout(BX.delegate(function(){this.updateStateLight()},this),1e3)}else{this.sendAjaxTry=0}},this),onfailure:BX.delegate(function(e){this.sendAjaxTry=0},this)})},this),300)};BX.ImMobile.prototype.updateCounter=function(){clearTimeout(this.timeoutUpdateCounters);this.timeoutUpdateCounters=setTimeout(BX.delegate(function(){this.messageCount=0;for(var e in this.messageCountArray)this.messageCount+=parseInt(this.messageCountArray[e]);app.setBadge(parseInt(this.messageCount+this.notifyCount));app.setCounters({messages:this.messageCount,notifications:this.notifyCount})},this),500)};BX.ImMobile.prototype.isFocus=function(){return false};BX.ImMobile.prototype.isFocusMobile=function(e){BXMobileApp.UI.Page.isVisible({callback:BX.delegate(function(t){e(t.status=="visible")},this)});return null};BX.ImMobile.prototype.isMobile=function(){return false};BX.ImMobile.prototype.checkRevision=function(e){e=parseInt(e);if(typeof e=="number"&&this.revision<e){console.log("NOTICE: Window reload, because REVISION UP ("+this.revision+" -> "+e+")");BXMobileApp.UI.Page.reloadUnique();return false}return true}})();(function(){if(BX.ImMessengerMobile)return;BX.ImMessengerMobile=function(e,t){this.BXIM=e;this.settings={};this.params=t||{};this.notify=t.notifyClass;this.disk=t.diskClass;this.smile=t.smile;this.smileSet=t.smileSet;this.popupMessengerLikeBlock={};this.popupMessengerLikeBlockTimeout={};this.sendAjaxTry=0;this.updateStateStepDefault=this.BXIM.ppStatus?parseInt(t.updateStateInterval):60;this.updateStateStep=this.updateStateStepDefault;this.updateStateTimeout=null;this.readMessageTimeout={};this.readMessageTimeoutSend=null;this.users=t.users;this.groups=t.groups;this.userInGroup=t.userInGroup;this.woGroups=t.woGroups;this.woUserInGroup=t.woUserInGroup;this.redrawTab={};this.loadLastMessageTimeout={};this.showMessage=t.showMessage;this.unreadMessage=t.unreadMessage;this.flashMessage=t.flashMessage;this.history=t.history||{};this.chat=t.chat;this.userChat=t.userChat;this.userInChat=t.userInChat;this.userChatBlockStatus=t.userChatBlockStatus;this.hrphoto=t.hrphoto;this.dialogStatusRedrawTimeout=null;this.chatHeaderRedrawTimeout=null;this.textareaHistory={};this.phones={};this.errorMessage={};this.message=t.message;this.messageTmpIndex=0;this.messageCount=t.countMessage;this.sendMessageFlag=0;this.sendMessageTmp={};this.sendMessageTmpTimeout={};this.popupMessenger={fake:true};this.popupMessengerTextarea=null;this.openChatFlag=false;this.popupMessengerLastMessage=0;this.readedList={};this.writingList={};this.writingListTimeout={};this.writingSendList={};this.writingSendListTimeout={};this.contactListPanelStatus=null;this.contactListSearchText="";this.popupContactListElementsWrap=null;this.popupContactListSearchInput=null;this.popupMessengerConnectionStatusState="online";this.popupMessengerConnectionStatusStateText="online";this.popupMessengerConnectionStatus=null;this.popupMessengerConnectionStatusText=null;this.popupMessengerConnectionStatusTimeout=null;this.recent=t.recent?t.recent:[];this.recentListLoad=t.recent?true:false;this.recentList=true;this.recentListReturn=false;this.recentListTab=null;this.recentListTabCounter=null;this.recentListIndex=[];this.currentTab=t.currentTab;this.contactList=false;this.contactListTab=null;this.contactListLoad=false;this.redrawContactListTimeout={};this.redrawRecentListTimeout=null;this.enableGroupChat=this.BXIM.ppStatus?true:false;this.historySearch="";this.historyOpenPage={};this.historyLoadFlag={};this.historyEndOfList={};this.popupMessengerBody=null;this.popupMessengerBodyDialog=null;this.popupMessengerBodyAnimation=null;this.popupMessengerBodySize=295;this.popupMessengerBodyWrap=null;this.popupMessengerFileForm=null;this.popupMessengerFileDropZone=null;this.popupMessengerFileButton=null;this.popupMessengerFileFormChatId=null;this.popupMessengerFileFormInput=null};BX.ImMessengerMobile.prototype.drawRecentList=function(){app.pullDown({enable:true,pulltext:BX.message("IM_PULLDOWN_RL_1"),downtext:BX.message("IM_PULLDOWN_RL_2"),loadtext:BX.message("IM_PULLDOWN_RL_3"),callback:function(){app.BasicAuth({success:function(){BX.onCustomEvent("onImError",[{error:"RECENT_RELOAD"}]);BXMobileApp.onCustomEvent("onImError",{error:"RECENT_RELOAD"});BXMobileApp.UI.Page.reload()},failture:function(){app.pullDownLoadingStop()}})}});this.popupContactListSearchInput=BX("im-contact-list-search");this.popupContactListSearchInput.innerHTML="";BX.addClass(this.popupContactListSearchInput,"bx-messenger-cl-wrap");BX.unbindAll(this.popupContactListSearchInput);BX.adjust(this.popupContactListSearchInput,{children:[this.popupContactListSearchWrap=BX.create("div",{props:{className:"bx-messenger-cl-search"},children:[BX.create("div",{props:{className:"bx-messenger-input-wrap bx-messenger-cl-search-wrap"},children:[this.popupContactListSearchClose=BX.create("span",{props:{className:"bx-messenger-input-close"}}),this.popupContactListSearchInput=BX.create("input",{attrs:{type:"text",placeholder:BX.message("IM_SEARCH_PLACEHOLDER_CP"),value:this.contactListSearchText},props:{className:"bx-messenger-input"}})]})]})]});BX.bind(this.popupContactListSearchInput,"keyup",BX.delegate(function(e){BX.MessengerCommon.contactListSearch(e)},this));this.popupContactListElementsWrap=BX("im-contact-list-wrap");this.popupContactListElementsWrap.innerHTML="";BX.unbindAll(this.popupContactListElementsWrap);BX.addClass(this.popupContactListElementsWrap,"bx-messenger-recent-wrap");BitrixMobile.fastClick.bindDelegate(this.popupContactListElementsWrap,{className:"bx-messenger-cl-item"},BX.delegate(BX.MessengerCommon.contactListClickItem,BX.MessengerCommon));BitrixMobile.fastClick.bindDelegate(this.popupContactListElementsWrap,{className:"bx-messenger-cl-group-title"},BX.delegate(BX.MessengerCommon.contactListToggleGroup,BX.MessengerCommon));BX.bind(this.popupContactListSearchClose,"click",BX.delegate(BX.MessengerCommon.contactListSearchClear,BX.MessengerCommon));BX.MessengerCommon.userListRedraw()};BX.ImMessengerMobile.prototype.openPhotoGallery=function(e){var t=BX.findChildrenByClassName(this.BXIM.messenger.popupMessengerBodyWrap,"bx-messenger-file-image-text");var s=[];var i="";var a="";for(var n=0;n<t.length;n++){a=t[n].getAttribute("src");s.push({url:a.replace("preview=Y&",""),description:t[n].innerHTML});if(e&&a.indexOf(e)>-1)i=a.replace("preview=Y&","")}if(s.length>0){BX.localStorage.set("impmh",true,1);BXMobileApp.UI.Photo.show({photos:s,default_photo:i})}};BX.ImMessengerMobile.prototype.dialogStatusRedraw=function(e){var t=e&&e.type?parseInt(e.type):"none";clearTimeout(this.dialogStatusRedrawTimeout);this.dialogStatusRedrawTimeout=setTimeout(BX.delegate(function(){this.dialogStatusRedrawDelay(e)},this),200)};BX.ImMessengerMobile.prototype.dialogStatusRedrawDelay=function(e){e=e||{};if(this.currentTab==0)return false;this.openChatFlag=false;this.openCallFlag=false;if(this.currentTab.toString().substr(0,4)=="chat"){this.openChatFlag=true;if(this.chat[this.currentTab.toString().substr(4)]&&this.chat[this.currentTab.toString().substr(4)].style=="call")this.openCallFlag=true}if(this.openChatFlag){var t=this.currentTab.toString().substr(4);if(this.chat[t]&&this.chat[t].style!="call"){app.menuCreate({items:[{icon:"user",name:BX.message("IM_M_MENU_USERS"),action:BX.delegate(function(){app.loadPageBlank({url:"/mobile/im/chat.php?chat_id="+this.currentTab.toString().substr(4),bx24ModernStyle:true})},this)},{icon:"add",name:BX.message("IM_M_MENU_ADD"),action:BX.delegate(function(){this.extendChat(this.currentTab,true)},this)},{icon:"reload",name:BX.message("IM_M_MENU_RELOAD"),action:function(){BXMobileApp.UI.Page.reloadUnique()}}]})}else{app.menuCreate({items:[{icon:"reload",name:BX.message("IM_M_MENU_RELOAD"),action:function(){BXMobileApp.UI.Page.reloadUnique()}}]})}}else if(this.currentTab){var s=this.currentTab;app.menuCreate({items:[{icon:"user",name:BX.message("IM_M_MENU_USER"),action:BX.delegate(function(){app.loadPageBlank({url:this.BXIM.path.profileTemplate.replace("#user_id#",this.currentTab),bx24ModernStyle:true})},this)},{icon:"add",name:BX.message("IM_M_MENU_ADD"),action:BX.delegate(function(){this.extendChat(this.currentTab,false)},this)},{icon:"reload",name:BX.message("IM_M_MENU_RELOAD"),action:function(){BXMobileApp.UI.Page.reloadUnique()}}]})}if(app.enableInVersion(10)){if(this.openChatFlag){BXMobileApp.UI.Page.TopBar.title.setText(this.chat[t].name);BXMobileApp.UI.Page.TopBar.title.setImage(BX.MessengerCommon.isBlankAvatar(this.chat[t].avatar)?"":this.chat[t].avatar);if(this.chat[t].style=="call"){BXMobileApp.UI.Page.TopBar.title.setDetailText(BX.message("IM_VI_CALL"))}else{if(this.userInChat[t])BXMobileApp.UI.Page.TopBar.title.setDetailText(BX.message("IM_M_MENU_USERS")+": "+this.userInChat[t].length)}}else{BXMobileApp.UI.Page.TopBar.title.setText(this.users[s].name);BXMobileApp.UI.Page.TopBar.title.setImage(BX.MessengerCommon.isBlankAvatar(this.users[s].avatar)?"":this.users[s].avatar);BXMobileApp.UI.Page.TopBar.title.setDetailText(this.users[s].workPosition)}BXMobileApp.UI.Page.TopBar.title.setCallback(function(){app.menuShow()});BXMobileApp.UI.Page.TopBar.title.show()}else{app.addButtons({addRefreshButton:{type:"context-menu",style:"custom",callback:function(){app.menuShow()}}})}if(this.popupMessengerFileFormChatId){if(this.openChatFlag)this.popupMessengerFileFormChatId.value=t;else this.popupMessengerFileFormChatId.value=this.userChat[this.currentTab]?this.userChat[this.currentTab]:0}if(!e.slidingPanelRedrawDisable&&(s>0&&!this.users[s].fake||t>0&&!this.chat[t].fake)){var i=false;var a={};if(this.openChatFlag){if(this.openCallFlag){i=true;a["button_2"]={name:BX.message("IM_PHONE_CALL"),type:"call_audio",callback:BX.delegate(function(){document.location.href="tel:"+this.chat[t].call_number},this)}}else{app.hideButtonPanel()}}else if(this.webrtc.mobileSupport&&app.enableInVersion(10)){i=true;if(this.webrtc.mobileSupport&&app.enableInVersion(9)){a["button_1"]={name:BX.message("IM_VIDEO_CALL"),type:"call_video",callback:function(){app.onCustomEvent("onCallInvite",{userId:s})}}}var n=BX.MessengerCommon.countObject(this.phones[s]);if(n>0){var o=[];o.push({title:BX.message("IM_AUDIO_CALL"),callback:BX.delegate(function(){app.onCustomEvent("onCallInvite",{userId:s,video:false})},this)});if(this.phones[s].PERSONAL_MOBILE){o.push({title:BX.message("IM_PHONE_MOB")+": "+this.phones[s].PERSONAL_MOBILE,callback:BX.delegate(function(){document.location.href="tel:"+this.phones[s].PERSONAL_MOBILE},this)})}if(this.phones[s].WORK_PHONE){o.push({title:BX.message("IM_PHONE_WORK")+": "+this.phones[s].WORK_PHONE,callback:BX.delegate(function(){document.location.href="tel:"+this.phones[s].WORK_PHONE},this)})}if(this.phones[s].PERSONAL_PHONE){o.push({title:BX.message("IM_PHONE_DEF")+": "+this.phones[s].PERSONAL_PHONE,callback:BX.delegate(function(){document.location.href="tel:"+this.phones[s].PERSONAL_PHONE},this)})}if(o.length>1){var r=new BXMobileApp.UI.ActionSheet({buttons:o},"call_audio");a["button_2"]={name:BX.message("IM_PHONE_CALL"),type:"call_audio",callback:function(){r.show()}}}else{a["button_2"]={name:BX.message("IM_AUDIO_CALL"),type:"call_audio",callback:function(){app.onCustomEvent("onCallInvite",{userId:s,video:false})}}}}else{a["button_2"]={name:BX.message("IM_AUDIO_CALL"),type:"call_audio",callback:function(){app.onCustomEvent("onCallInvite",{userId:s,video:false})}}}}else if(this.webrtc.mobileSupport&&app.enableInVersion(9)){i=true;a["button_1"]={name:BX.message("IM_VIDEO_CALL"),type:"call_video",callback:function(){app.onCustomEvent("onCallInvite",{userId:s})}};a["button_2"]={name:BX.message("IM_AUDIO_CALL"),type:"call_audio",callback:function(){app.onCustomEvent("onCallInvite",{userId:s,video:false})}}}if(i){app.showSlidingPanel({hidden_sliding_panel:false,buttons:a})}}};BX.ImMessengerMobile.prototype.autoScroll=function(){if(document.body.scrollHeight<=window.innerHeight)return false;this.popupMessengerBody.scrollTop=this.popupMessengerBody.scrollHeight;return true};BX.ImMessengerMobile.prototype.takePhotoMenu=function(){var e=new BXMobileApp.UI.ActionSheet({buttons:[{title:BX.message("IM_MENU_UPLOAD_PHOTO"),callback:BX.delegate(function(){app.takePhoto({quality:80,source:1,correctOrientation:true,targetWidth:1024,targetHeight:1024,destinationType:Camera.DestinationType.DATA_URL,callback:BX.delegate(this.disk.uploadFromMobile,this.disk)})},this)},{title:BX.message("IM_MENU_UPLOAD_GALLERY"),callback:BX.delegate(function(){app.takePhoto({quality:80,targetWidth:1024,targetHeight:1024,destinationType:Camera.DestinationType.DATA_URL,callback:BX.delegate(this.disk.uploadFromMobile,this.disk)})},this)}]},"textPanelSheet");e.show()};BX.ImMessengerMobile.prototype.updateChatAvatar=function(e,t){if(!this.openChatFlag)return false;var s=this.currentTab.toString().substr(4);if(e!=s)return false;if(app.enableInVersion(10)){BXMobileApp.UI.Page.TopBar.title.setImage(BX.MessengerCommon.isBlankAvatar(t)?"":t)}};BX.ImMessengerMobile.prototype.redrawChatHeader=function(){clearTimeout(this.chatHeaderRedrawTimeout);this.chatHeaderRedrawTimeout=setTimeout(BX.delegate(function(){this.redrawChatHeaderDelay(params)},this),200)};BX.ImMessengerMobile.prototype.redrawChatHeaderDelay=function(){if(!this.openChatFlag)return false;var e=this.currentTab.toString().substr(4);if(!this.chat[e])return false;if(this.popupMessengerFileFormChatId){this.popupMessengerFileFormChatId.value=e}if(app.enableInVersion(10)){BXMobileApp.UI.Page.TopBar.title.setText(this.chat[e].name);BXMobileApp.UI.Page.TopBar.title.setImage(BX.MessengerCommon.isBlankAvatar(this.chat[e].avatar)?"":this.chat[e].avatar);if(this.chat[e].style=="call"){BXMobileApp.UI.Page.TopBar.title.setDetailText(BX.message("IM_VI_CALL"))}else{if(this.userInChat[e])BXMobileApp.UI.Page.TopBar.title.setDetailText(BX.message("IM_M_MENU_USERS")+": "+this.userInChat[e].length)}}};BX.ImMessengerMobile.prototype.extraClose=function(){app.closeController()};BX.ImMessengerMobile.prototype.openMessenger=function(e,t,s){if(this.BXIM.mobileAction=="RECENT"){s=s!==false;if(this.currentTab!=e){var i=BX.findChild(this.popupContactListElementsWrap,{attribute:{"data-userId":this.currentTab}},false);if(i){BX.removeClass(i,"bx-messenger-cl-item-active")}if(!t){i=BX.findChild(this.popupContactListElementsWrap,{attribute:{"data-userId":e}},false);if(i){t=i}}if(t){BX.addClass(t,"bx-messenger-cl-item-active")}this.currentTab=e}if(s){BXMobileApp.PageManager.loadPageUnique({url:this.BXIM.pathToRoot+"mobile/im/dialog.php"+(!app.enableInVersion(11)?"?id="+this.currentTab:""),bx24ModernStyle:true,data:{dialogId:this.currentTab}})}}else if(this.BXIM.mobileAction=="DIALOG"){if(this.currentTab==e&&this.popupMessengerBodyWrap.innerHTML!="")return false;if(typeof e=="undefined"||e==null)e=0;if(e==this.BXIM.userId){this.currentTab=0;e=0}if(this.currentTab==null)this.currentTab=0;this.openChatFlag=false;this.openCallFlag=false;if(e.toString().substr(0,4)=="chat"){this.openChatFlag=true;BX.MessengerCommon.getUserParam(e);if(this.chat[e.toString().substr(4)]&&this.chat[e.toString().substr(4)].style=="call")this.openCallFlag=true}else if(this.users[e]&&this.users[e].id){e=parseInt(e)}else{e=parseInt(e);if(isNaN(e)){e=0}else{BX.MessengerCommon.getUserParam(e)}}if(!this.openChatFlag&&typeof e!="number")e=0;if(e==0){this.openChatFlag=false;app.closeController()}else if(this.openChatFlag||e>0){this.currentTab=e;BX.MessengerCommon.openDialog(this.currentTab)}}};BX.ImMessengerMobile.prototype.closeMessenger=function(e){e=e?e:this.currentTab;var t=BX.findChild(this.popupContactListElementsWrap,{attribute:{"data-userId":e}},false);if(t){if(BX.hasClass(t,"bx-messenger-cl-item-active")){BX.removeClass(t,"bx-messenger-cl-item-active");this.currentTab=0;this.openChatFlag=false}}};BX.ImMessengerMobile.prototype.closeMenuPopup=function(){};BX.ImMessengerMobile.prototype.editMessageCancel=function(){};BX.ImMessengerMobile.prototype.sendMessage=function(e,t){e=typeof e=="string"||typeof e=="number"?e:this.currentTab;BX.MessengerCommon.endSendWriting(e);t=t.replace("    ","	");t=BX.util.trim(t);if(t.length==0)return false;var s=e.toString().substr(0,4)=="chat"?e.toString().substr(4):this.userChat[e]?this.userChat[e]:0;if(this.errorMessage[e]){BX.MessengerCommon.sendMessageRetry();this.errorMessage[e]=false}var i=this.messageTmpIndex;this.message["temp"+i]={id:"temp"+i,chatId:s,senderId:this.BXIM.userId,recipientId:e,date:BX.MessengerCommon.getNowDate(),text:BX.MessengerCommon.prepareText(t,true)};if(!this.showMessage[e])this.showMessage[e]=[];this.showMessage[e].push("temp"+i);this.messageTmpIndex++;BX.localStorage.set("mti",this.messageTmpIndex,5);if(e!=this.currentTab)return false;clearTimeout(this.textareaHistoryTimeout);var a=BX.findChildByClassName(this.popupMessengerBodyWrap,"bx-messenger-content-load");if(a)BX.remove(a);var n=BX.findChildByClassName(this.popupMessengerBodyWrap,"bx-messenger-content-empty");if(n)BX.remove(n);BX.MessengerCommon.drawMessage(e,this.message["temp"+i]);this.textareaHistory[e]="";BX.MessengerCommon.sendMessageAjax(i,e,t,e.toString().substr(0,4)=="chat");

return true};BX.ImMessengerMobile.prototype.setUpdateStateStep=function(){};BX.ImMessengerMobile.prototype.setUpdateStateStepCount=function(){};BX.ImMessengerMobile.prototype.extendChat=function(e,t){app.openTable({url:this.BXIM.pathToRoot+"mobile/index.php?mobile_action=get_user_list",callback:BX.delegate(function(s){if(!(s&&s.a_users&&s.a_users[0]))return;var i=[];for(var a=0;a<s.a_users.length;a++)i.push(s.a_users[a]["ID"].toString());var s=false;if(!t){i.push(e);s={IM_CHAT_ADD:"Y",USERS:JSON.stringify(i),IM_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()}}else{s={IM_CHAT_EXTEND:"Y",CHAT_ID:e.substr(4),USERS:JSON.stringify(i),IM_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()}}if(!s)return false;BX.ajax({url:this.BXIM.pathToRoot+"mobile/ajax.php?mobile_action=im&"+(t?"CHAT_EXTEND":"CHAT_ADD"),method:"POST",dataType:"json",timeout:60,data:s,onsuccess:BX.delegate(function(e){if(e.ERROR==""){if(!t&&e.CHAT_ID){BXMobileApp.PageManager.loadPageUnique({url:this.BXIM.pathToRoot+"mobile/im/dialog.php"+(!app.enableInVersion(11)?"?id=chat"+e.CHAT_ID:""),bx24ModernStyle:true,data:{dialogId:"chat"+e.CHAT_ID}})}}else{alert(e.ERROR)}},this)})},this),set_focus_to_search:true,markmode:true,multiple:true,return_full_mode:true,modal:true,alphabet_index:true,outsection:false,okname:BX.message("IM_M_EXTEND")})};BX.ImMessengerMobile.prototype.messageReply=function(e){if(!this.users[e]||this.users[e].fake)return false;var t=BX.util.htmlspecialcharsback(this.users[e].name);t=t+", ";if(!this.textareaHistory[this.currentTab])this.textareaHistory[this.currentTab]="";this.textareaHistory[this.currentTab]=this.textareaHistory[this.currentTab]+" "+t;BXMobileApp.UI.Page.TextPanel.setText(this.textareaHistory[this.currentTab]);BXMobileApp.UI.Page.TextPanel.focus()};BX.ImMessengerMobile.prototype.openMessageMenu=function(e){if(!this.message[e]||this.BXIM.keyboardShow||BX.localStorage.get("impmh"))return false;var t=BX.MessengerCommon.messageIsLike(e);var s=[];s.push({title:BX.message(t?"IM_MENU_MESS_DISLIKE":"IM_MENU_MESS_LIKE"),callback:BX.delegate(function(){BX.MessengerCommon.messageLike(e)},this)});var i=this.message[e].senderId;if(i>0){s.push({title:BX.message("IM_MENU_MESS_REPLY"),callback:BX.delegate(function(){this.messageReply(i)},this)})}var a=0;var n=BX("im-message-"+e);if(n){var o=BX.findChildrenByClassName(n.parentNode.parentNode,"bx-messenger-message");for(var r=o.length-1;r>=0&&a==0;r--){if(!BX.hasClass(o[r],"bx-messenger-message-deleted")){a=o[r].id.substr(11)}}}if(BX.MessengerCommon.checkEditMessage(a)){s.push({title:BX.message("IM_MENU_MESS_DEL"),callback:BX.delegate(function(){this.deleteMessage(a)},this)})}var l=new BXMobileApp.UI.ActionSheet({buttons:s},"im-message-menu");l.show()};BX.ImMessengerMobile.prototype.deleteMessage=function(e,t){if(!BX.MessengerCommon.checkEditMessage(e))return false;if(t!==false){var s=this.message[e].text.length>50?this.message[e].text.substr(0,47)+"...":this.message[e].text;app.confirm({title:BX.message("IM_MENU_MESS_DEL_CONFIRM"),text:'"'+s+'"',buttons:[BX.message("IM_MENU_MESS_DEL_YES"),BX.message("IM_MENU_MESS_DEL_NO")],callback:function(t){if(t==1){BX.MessengerCommon.deleteMessageAjax(e)}}})}else{this.deleteMessageAjax(e)}}})();(function(){if(BX.ImNotifyMobile)return;BX.ImNotifyMobile=function(e,t){this.BXIM=e;this.sendAjaxTry=0;this.notifyLastId=0;this.notifyLoadFlag=false;this.timeoutNotifyViewedWait=null};BX.ImNotifyMobile.prototype.notifyViewedWait=function(){clearTimeout(this.timeoutNotifyViewedWait);if(!this.notifyLoadFlag){this.timeoutNotifyViewedWait=setTimeout(BX.delegate(this.notifyViewed,this),300);this.BXIM.notifyCount=0;this.BXIM.updateCounter()}else{clearTimeout(this.timeoutNotifyViewedWait);this.timeoutNotifyViewedWait=setTimeout(BX.delegate(this.notifyViewedWait,this),2e3)}};BX.ImNotifyMobile.prototype.notifyViewed=function(){if(parseInt(this.notifyLastId)<=0)return false;BX.ajax({url:this.BXIM.pathToAjax,method:"POST",dataType:"json",skipAuthCheck:true,data:{IM_NOTIFY_VIEWED:"Y",MAX_ID:parseInt(this.notifyLastId),IM_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){if(e.ERROR.length==0){this.sendAjaxTry=0;this.notifyLastId=0}else if(e.ERROR=="AUTHORIZE_ERROR"&&this.sendAjaxTry<=3){this.sendAjaxTry++;BX.onCustomEvent("onImError",[{error:e.ERROR}]);BXMobileApp.onCustomEvent("onImError",{error:e.ERROR});setTimeout(BX.delegate(function(){this.notifyViewed()},this),2e3)}else if(e.ERROR=="SESSION_ERROR"&&this.sendAjaxTry<=3){this.sendAjaxTry++;BX.message({bitrix_sessid:e.BITRIX_SESSID});setTimeout(BX.delegate(function(){this.notifyViewed()},this),1e3)}else{this.sendAjaxTry=0}},this),onfailure:BX.delegate(function(e){this.sendAjaxTry=0},this)});return true}})();(function(){if(BX.ImDiskManagerMobile)return;BX.ImDiskManagerMobile=function(e,t){this.BXIM=e;this.notify=t.notifyClass;this.enable=t.enable;this.lightVersion=false;this.formBlocked={};this.formAgents={};this.files=t.files;this.filesProgress={};this.filesMessage={};this.filesRegister={};this.fileTmpId=1;this.timeout={};BX.garbage(function(){var e={};var t=0;for(var s in this.filesMessage){e[s]=this.filesMessage[s];if(this.messenger.message[e[s]]){t=this.messenger.message[e[s]].chatId}}if(t>0){BX.ajax({url:this.BXIM.pathToFileAjax+"?FILE_TERMINATE&V="+this.BXIM.revision,method:"POST",dataType:"json",timeout:30,async:false,data:{IM_FILE_UNREGISTER:"Y",CHAT_ID:t,FILES:JSON.stringify(this.filesProgress),MESSAGES:JSON.stringify(e),IM_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()}})}},this)};BX.ImDiskManagerMobile.prototype.chatDialogInit=function(){this.formAgents["imDialog"]=BX.Uploader.getInstance({id:"imDialog",allowUpload:"A",uploadMethod:"deferred",uploadFormData:"Y",showImage:true,filesInputMultiple:true,uploadFileUrl:this.BXIM.pathToFileAjax,input:null,fields:{preview:{params:{width:212,height:119}}}});this.formAgents["imDialog"].form=this.messenger.popupMessengerFileForm;BX.addCustomEvent(this.formAgents["imDialog"],"onError",BX.delegate(BX.MessengerCommon.diskChatDialogUploadError,BX.MessengerCommon));BX.addCustomEvent(this.formAgents["imDialog"],"onFileIsInited",BX.delegate(function(e,t,s){BX.MessengerCommon.diskChatDialogFileInited(e,t,s);BX.addCustomEvent(t,"onUploadStart",BX.delegate(BX.MessengerCommon.diskChatDialogFileStart,BX.MessengerCommon));BX.addCustomEvent(t,"onUploadProgress",BX.delegate(BX.MessengerCommon.diskChatDialogFileProgress,BX.MessengerCommon));BX.addCustomEvent(t,"onUploadDone",BX.delegate(BX.MessengerCommon.diskChatDialogFileDone,BX.MessengerCommon));BX.addCustomEvent(t,"onUploadError",BX.delegate(BX.MessengerCommon.diskChatDialogFileError,BX.MessengerCommon))},this))};BX.ImDiskManagerMobile.prototype.uploadFromMobile=function(e){var t=BX.UploaderUtils.dataURLToBlob("data:image/png;base64,"+e);t.name="mobile_"+BX.date.format("Ymd_His")+".png";this.formAgents["imDialog"].onChange([t])};BX.ImDiskManagerMobile.prototype.diskChatDialogFileInited=function(e,t,s){var i=s.form.CHAT_ID.value;if(!this.files[i])this.files[i]={};this.files[i][e]={id:e,tempId:e,chatId:i,date:BX.MessengerCommon.getNowDate(),type:t.isImage?"image":"file",preview:t.isImage?t.canvas:"",name:t.name,size:t.file.size,status:"upload",progress:-1,authorId:this.BXIM.userId,authorName:this.messenger.users[this.BXIM.userId].name,urlPreview:"",urlShow:"",urlDownload:""};if(!this.filesRegister[i])this.filesRegister[i]={};this.filesRegister[i][e]={id:e,type:this.files[i][e].type,mimeType:t.file.type,name:this.files[i][e].name,size:this.files[i][e].size};BX.MessengerCommon.diskChatDialogFileRegister(i)};BX.ImDiskManagerMobile.prototype.saveToDisk=function(){return true}})();
//# sourceMappingURL=mobile.map.js