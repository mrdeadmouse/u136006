if(!BX.VoxImplant)BX.VoxImplant=function(){};BX.VoxImplant.rentPhone=function(){};BX.VoxImplant.rentPhone.init=function(n){BX.VoxImplant.rentPhone.publicFolder=n.publicFolder;BX.VoxImplant.rentPhone.selectPlaceholder=n.selectPlaceholder;BX.VoxImplant.rentPhone.numbersPlaceholder=n.numbersPlaceholder;BX.VoxImplant.rentPhone.location=n.location;BX.VoxImplant.rentPhone.country=false;BX.VoxImplant.rentPhone.countryTypes={};BX.VoxImplant.rentPhone.countryStates={};BX.VoxImplant.rentPhone.countryRegion={};BX.VoxImplant.rentPhone.countryRegionNumbers={};BX.VoxImplant.rentPhone.countryRegionNumberCount=0;BX.VoxImplant.rentPhone.currentCountry="";BX.VoxImplant.rentPhone.currentCountryState="";BX.VoxImplant.rentPhone.currentCountryCategory="";BX.VoxImplant.rentPhone.currentCountryRegion="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.phoneNumberPrice=0;BX.VoxImplant.rentPhone.phoneNumberCurrency="RUR";BX.VoxImplant.rentPhone.getCountry();BX.ready(function(){BX.bind(BX("vi_rent_options"),"click",function(n){if(BX("vi_rent_options_div").style.display=="none"){BX.removeClass(BX(this),"webform-button-create");BX("vi_rent_options_div").style.display="block"}else{BX.addClass(BX(this),"webform-button-create");BX("vi_rent_options_div").style.display="none"}BX.PreventDefault(n)})})};BX.VoxImplant.rentPhone.getCountry=function(){if(BX.VoxImplant.rentPhone.blockAjax)return true;if(!BX.VoxImplant.rentPhone.country){BX.VoxImplant.rentPhone.blockAjax=true;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_GET_COUNTRY",method:"POST",dataType:"json",timeout:60,data:{VI_GET_COUNTRY:"Y",VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(n){BX.VoxImplant.rentPhone.blockAjax=false;if(n.ERROR==""){BX.VoxImplant.rentPhone.country={};for(var e in n.RESULT){BX.VoxImplant.rentPhone.country[e]=n.RESULT[e];BX.VoxImplant.rentPhone.countryTypes[e]=n.RESULT[e].CATEGORIES}BX.VoxImplant.rentPhone.drawSelectBox("country")}else{alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR"))}},this),onfailure:function(){BX.VoxImplant.rentPhone.blockAjax=false}})}else{BX.VoxImplant.rentPhone.drawSelectBox("country")}};BX.VoxImplant.rentPhone.getCountryCategoryParams=function(){var n=0;var e=false;var t="";for(var r in BX.VoxImplant.rentPhone.countryTypes[BX.VoxImplant.rentPhone.currentCountry]){if(t==""){t=r}if(r=="GEOGRAPHIC"){e=true}n++}if(e){t="GEOGRAPHIC"}return{TYPE:t,COUNT:n}};BX.VoxImplant.rentPhone.getCountryRegionParams=function(){var n=0;var e="";var t=0;for(var r in BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState]){if(e==""){e=BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][r].REGION_ID;t=BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][r].PHONE_COUNT}n++}return{REGION_ID:e,REGION_COUNT:t,COUNT:n}};BX.VoxImplant.rentPhone.getState=function(){BX.VoxImplant.rentPhone.drawSelectBox("country");BX.VoxImplant.rentPhone.drawSelectBox("countryCategory");BX.showWait();if(BX.VoxImplant.rentPhone.currentCountry!="-"&&BX.VoxImplant.rentPhone.currentCountryCategory!="-"&&(!BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry]||!BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory])){var n=BX.VoxImplant.rentPhone.currentCountry;var e=BX.VoxImplant.rentPhone.currentCountryCategory;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_GET_STATE",method:"POST",dataType:"json",timeout:60,data:{VI_GET_STATE:"Y",COUNTRY_CODE:BX.VoxImplant.rentPhone.currentCountry,COUNTRY_CATEGORY:BX.VoxImplant.rentPhone.currentCountryCategory,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(t){if(t.ERROR==""){if(!BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry])BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry]={};if(!BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory])BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]={};for(var r in t.RESULT){BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][r]=t.RESULT[r]}if(n==BX.VoxImplant.rentPhone.currentCountry&&e==BX.VoxImplant.rentPhone.currentCountryCategory)BX.VoxImplant.rentPhone.drawSelectBox("state")}else{alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR"))}},this)})}else{BX.VoxImplant.rentPhone.drawSelectBox("state")}};BX.VoxImplant.rentPhone.getCountryCategory=function(){var n=BX.VoxImplant.rentPhone.getCountryCategoryParams();if(n.COUNT>1){BX.VoxImplant.rentPhone.drawSelectBox("countryCategory")}else if(n.TYPE!=""){BX.VoxImplant.rentPhone.currentCountryCategory=n.TYPE;BX.VoxImplant.rentPhone.drawSelectBox("country");BX.VoxImplant.rentPhone.getState()}};BX.VoxImplant.rentPhone.getRegion=function(){BX.VoxImplant.rentPhone.drawSelectBox("country");BX.VoxImplant.rentPhone.drawSelectBox("countryCategory");if(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].COUNTRY_HAS_STATES===true)BX.VoxImplant.rentPhone.drawSelectBox("state");BX.showWait();if(BX.VoxImplant.rentPhone.currentCountry!="-"&&BX.VoxImplant.rentPhone.currentCountryState!="-"&&BX.VoxImplant.rentPhone.currentCountryCategory!="-"&&(!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry]||!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]||!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState])){var n=BX.VoxImplant.rentPhone.currentCountry;var e=BX.VoxImplant.rentPhone.currentCountryCategory;var t=BX.VoxImplant.rentPhone.currentCountryState;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_GET_REGION",method:"POST",dataType:"json",timeout:60,data:{VI_GET_REGION:"Y",COUNTRY_CODE:BX.VoxImplant.rentPhone.currentCountry,COUNTRY_CATEGORY:BX.VoxImplant.rentPhone.currentCountryCategory,COUNTRY_STATE:BX.VoxImplant.rentPhone.currentCountryState,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(r){if(r.ERROR==""){if(!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry])BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry]={};if(!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory])BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]={};if(!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState])BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState]={};for(var o in r.RESULT){BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][o]=r.RESULT[o]}if(n==BX.VoxImplant.rentPhone.currentCountry&&t==BX.VoxImplant.rentPhone.currentCountryState&&e==BX.VoxImplant.rentPhone.currentCountryCategory)BX.VoxImplant.rentPhone.drawSelectBox("region")}else{alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR"))}},this)})}else{BX.VoxImplant.rentPhone.drawSelectBox("region")}};BX.VoxImplant.rentPhone.getNumbers=function(){if(BX.VoxImplant.rentPhone.currentCountryRegion=="-"||BX.VoxImplant.rentPhone.currentCountryRegion=="")return false;BX.showWait();if(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry].CAN_LIST_PHONES&&(!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry]||!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]||!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState]||!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion])){BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_GET_PHONE_NUMBERS",method:"POST",dataType:"json",timeout:60,data:{VI_GET_PHONE_NUMBERS:"Y",COUNTRY_CODE:BX.VoxImplant.rentPhone.currentCountry,COUNTRY_REGION:BX.VoxImplant.rentPhone.currentCountryRegion,COUNTRY_CATEGORY:BX.VoxImplant.rentPhone.currentCountryCategory,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(n){if(n.ERROR==""){if(!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry])BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry]={};if(!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory])BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]={};if(!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState])BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState]={};if(!BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion])BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion]={};for(var e in n.RESULT){BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion][e]=n.RESULT[e]}BX.VoxImplant.rentPhone.drawNumberBox()}else{alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR"))}},this)})}else{BX.VoxImplant.rentPhone.drawNumberBox()}};BX.VoxImplant.rentPhone.drawSelectBox=function(n){BX.closeWait();if(n=="state"){if(BX.VoxImplant.rentPhone.currentCountry=="-"){return false}else if(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].COUNTRY_HAS_STATES!==true){BX.VoxImplant.rentPhone.currentCountryState="";BX.VoxImplant.rentPhone.getRegion();return false}}else if(n=="countryCategory"){var e=BX.VoxImplant.rentPhone.getCountryCategoryParams();if(e.COUNT<=1){return false}}else if(n=="region"){if(BX.VoxImplant.rentPhone.currentCountryState=="-"){return false}BX.VoxImplant.rentPhone.countryRegionNumberCount=0;var e=BX.VoxImplant.rentPhone.getCountryRegionParams();if(e.COUNT==1){BX.VoxImplant.rentPhone.currentCountryRegion=e.REGION_ID;BX.VoxImplant.rentPhone.countryRegionNumberCount=e.REGION_COUNT;BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.getNumbers();return false}else if(e.COUNT==0){BX.VoxImplant.rentPhone.currentCountryRegion=0;BX.VoxImplant.rentPhone.drawNumberBox();return false}}var t=[];if(n=="country"){t.push(BX.create("option",{attrs:{value:"-"},style:{color:"#888888"},html:BX.message("VI_CONFIG_RENT_COUNTRY")}));for(var r in BX.VoxImplant.rentPhone.country){var o={value:r};if(BX.VoxImplant.rentPhone.currentCountry==r)o["selected"]="true";t.push(BX.create("option",{attrs:o,html:BX.VoxImplant.rentPhone.country[r].COUNTRY_NAME}))}BX.VoxImplant.rentPhone.selectPlaceholder.innerHTML=""}else if(n=="countryCategory"){t.push(BX.create("option",{attrs:{value:"-"},style:{color:"#888888"},html:BX.message("VI_CONFIG_RENT_PHONE_NUMBER")}));for(var a in BX.VoxImplant.rentPhone.countryTypes[BX.VoxImplant.rentPhone.currentCountry]){if(a=="MOSCOW495")continue;var o={value:a};if(BX.VoxImplant.rentPhone.currentCountryCategory==a)o["selected"]="true";var l=BX.VoxImplant.rentPhone.countryTypes[BX.VoxImplant.rentPhone.currentCountry][a].PHONE_TYPE;if(BX.message["VI_CONFIG_RENT_"+l]){l=BX.message("VI_CONFIG_RENT_"+l)}t.push(BX.create("option",{attrs:o,html:l}))}}else if(n=="state"){t.push(BX.create("option",{attrs:{value:"-"},style:{color:"#888888"},html:BX.message("VI_CONFIG_RENT_STATE")}));for(var u in BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]){var o={value:u};if(BX.VoxImplant.rentPhone.currentCountryState==u)o["selected"]="true";t.push(BX.create("option",{attrs:o,html:BX.VoxImplant.rentPhone.countryStates[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][u]}))}}else if(n=="region"){t.push(BX.create("option",{attrs:{value:"-"},style:{color:"#888888"},html:BX.message(BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE"?"VI_CONFIG_RENT_CATEGORY":"VI_CONFIG_RENT_REGION")}));if(BX.VoxImplant.rentPhone.currentCountry=="RU"){var m=[1,15,2];for(var c=0;c<m.length;c++){if(!BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][m[c]])continue;t.push(BX.create("option",{attrs:{value:BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][m[c]].REGION_ID,"data-count":BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][m[c]].PHONE_COUNT},html:BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][m[c]].REGION_NAME}));BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][m[c]].HIDE=true}}var p=BX.util.objectSort(BX.VoxImplant.rentPhone.countryRegion[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState],"REGION_NAME","asc");for(var c=0;c<p.length;c++){if(p[c].HIDE)continue;t.push(BX.create("option",{attrs:{value:p[c].REGION_ID,"data-count":p[c].PHONE_COUNT},html:p[c].REGION_NAME}))}}var I=BX.create("div",{props:{className:"tel-set-item-select-wrap"},children:[BX.create("select",{props:{className:"tel-set-item-select"},events:{change:function(e){if(n=="country"){BX.VoxImplant.rentPhone.currentCountry=this.options[this.selectedIndex].value;BX.VoxImplant.rentPhone.currentCountryCategory="-";BX.VoxImplant.rentPhone.currentCountryState="-";BX.VoxImplant.rentPhone.currentCountryRegion="-";BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.getCountry();BX.VoxImplant.rentPhone.getCountryCategory()}else if(n=="countryCategory"){BX.VoxImplant.rentPhone.currentCountryCategory=this.options[this.selectedIndex].value;BX.VoxImplant.rentPhone.currentCountryState="-";BX.VoxImplant.rentPhone.currentCountryRegion="-";BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.getState()}else if(n=="state"){BX.VoxImplant.rentPhone.currentCountryState=this.options[this.selectedIndex].value;BX.VoxImplant.rentPhone.currentCountryRegion="-";BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.getRegion()}else if(n=="region"){BX.VoxImplant.rentPhone.currentCountryRegion=this.options[this.selectedIndex].value;BX.VoxImplant.rentPhone.countryRegionNumberCount=this.options[this.selectedIndex].getAttribute("data-count");BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.currentNumber="";BX.VoxImplant.rentPhone.getNumbers()}}},children:t})]});BX.VoxImplant.rentPhone.selectPlaceholder.appendChild(I)};BX.VoxImplant.rentPhone.drawNumberBox=function(){BX.closeWait();if(BX.VoxImplant.rentPhone.currentCountryRegion=="-"||BX.VoxImplant.rentPhone.currentCountryCategory==""||BX.VoxImplant.rentPhone.currentCountryCategory=="-"){return false}BX.VoxImplant.rentPhone.phoneNumberPrice=0;if(parseFloat(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].FULL_PRICE)>0)BX.VoxImplant.rentPhone.phoneNumberPrice=BX.VoxImplant.rentPhone.phoneNumberPrice+parseFloat(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].FULL_PRICE);BX.VoxImplant.rentPhone.phoneNumberCurrency="RUR";if(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].CURRENCY)BX.VoxImplant.rentPhone.phoneNumberCurrency=BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry]["CATEGORIES"][BX.VoxImplant.rentPhone.currentCountryCategory].CURRENCY;var n=BX.message("VI_CONFIG_RENT_FEE_"+BX.VoxImplant.rentPhone.phoneNumberCurrency).replace("#MONEY#",BX.VoxImplant.rentPhone.phoneNumberPrice);var e=null;var t="";if(BX.VoxImplant.rentPhone.currentCountry=="RU"){if(BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE"){t=BX.message("VI_CONFIG_RENT_RU_TOLLFREE_2");t=t.replace("#LINK1_START#",'<a href="'+BX.message("VI_CONFIG_RENT_RU_TOLLFREE_LINK")+'" target="_blank">');t=t.replace("#LINK1_END#","</a>");t=t.replace("#LINK2_START#",'<a href="'+BX.message("VI_CONFIG_RENT_TARIFF_LINK")+'" target="_blank">');t=t.replace("#LINK2_END#","</a>")}else if(BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE804"){t=BX.message("VI_CONFIG_RENT_RU_TOLLFREE804_2");t=t.replace("#LINK1_START#",'<a href="'+BX.message("VI_CONFIG_RENT_RU_TOLLFREE804_LINK")+'" target="_blank">');t=t.replace("#LINK1_END#","</a>");t=t.replace("#LINK2_START#",'<a href="'+BX.message("VI_CONFIG_RENT_TARIFF_LINK")+'" target="_blank">');t=t.replace("#LINK2_END#","</a>")}}else if(BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE"){t=BX.message("VI_CONFIG_RENT_TEXT_TOLLFREE_2");t=t.replace("#LINK1_START#",'<a href="'+BX.message("VI_CONFIG_RENT_TARIFF_LINK")+'" target="_blank">');t=t.replace("#LINK1_END#","</a>")}if(t!=""){e=BX.create("div",{children:[BX.create("div",{props:{className:"tel-set-list-special-header"},html:t})]})}if(BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry]&&BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory]&&BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState]&&BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion]){var r=[];var o=BX.VoxImplant.rentPhone.countryRegionNumbers[BX.VoxImplant.rentPhone.currentCountry][BX.VoxImplant.rentPhone.currentCountryCategory][BX.VoxImplant.rentPhone.currentCountryState][BX.VoxImplant.rentPhone.currentCountryRegion];for(var a in o){BX.VoxImplant.rentPhone.phoneNumberPrice=o[a].FULL_PRICE;BX.VoxImplant.rentPhone.phoneNumberCurrency=o[a].CURRENCY;n=BX.message("VI_CONFIG_RENT_FEE_"+BX.VoxImplant.rentPhone.phoneNumberCurrency).replace("#MONEY#",BX.VoxImplant.rentPhone.phoneNumberPrice);var l="+"+a;if(BX.VoxImplant.rentPhone.currentCountry=="RU"&&(BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE"||BX.VoxImplant.rentPhone.currentCountryCategory=="TOLLFREE804")){l="8"+l.substr(2)}r.push(BX.create("span",{props:{className:"tel-set-list-item"},children:[BX.create("input",{attrs:{id:"phone"+a,name:"tel-set-list-item",value:a,type:"radio","data-country-code":o[a].COUNTRY_CODE,"data-region-id":o[a].REGION_ID,"data-phone-number":o[a].PHONE_NUMBER},props:{className:"tel-set-list-item-radio"},events:{click:function(n){BX.VoxImplant.rentPhone.currentCountry=this.getAttribute("data-country-code");BX.VoxImplant.rentPhone.currentCountryRegion=this.getAttribute("data-region-id");BX.VoxImplant.rentPhone.currentNumber=this.getAttribute("data-phone-number")},change:function(n){BX.VoxImplant.rentPhone.currentCountry=this.getAttribute("data-country-code");BX.VoxImplant.rentPhone.currentCountryRegion=this.getAttribute("data-region-id");BX.VoxImplant.rentPhone.currentNumber=this.getAttribute("data-phone-number")}}}),BX.create("label",{attrs:{"for":"phone"+a},props:{className:"tel-set-list-item-num"},html:l})]}))}var u=BX.create("div",{children:[BX.create("div",{props:{className:"tel-set-list-nums"},children:[e,BX.create("div",{props:{className:"tel-set-list-nums-title"},html:BX.message("VI_CONFIG_RENT_LIST_PHONES")}),BX.create("div",{props:{className:"tel-set-separate"}}),r.length>0?BX.create("div",{props:{className:"tel-set-list-nums-wrap"},children:r}):BX.create("div",{props:{className:"tel-set-list-nums-title"},attrs:{style:"margin:0"},html:BX.message("VI_CONFIG_RENT_NO_PHONES")})]}),BX.create("div",{props:{className:"tel-set-separate"}}),BX.create("div",{props:{className:"tel-set-amount-block"},children:[BX.create("div",{props:{className:"webform-button webform-button-create"},html:'<span class="webform-button-left"></span><span class="webform-button-text">'+BX.message("VI_CONFIG_RENT_BTN")+'</span><span class="webform-button-right"></span>',events:{click:function(n){BX.VoxImplant.rentPhone.attachPhone()}}}),BX.create("div",{attrs:{style:"line-height: 33px"},props:{className:"tel-set-amount-text"},html:r.length>0?BX.message("VI_CONFIG_RENT_MONTHLY_FEE").replace("#MONEY#","<strong>"+n+"</strong>"):""})]})]})}else if(BX.VoxImplant.rentPhone.countryRegionNumberCount>0){var u=BX.create("div",{children:[e,BX.create("div",{props:{className:"tel-set-separate"}}),BX.create("div",{props:{className:"tel-set-list-nums-title"},html:BX.message("VI_CONFIG_RENT_WITHOUT_CHOICE")}),BX.create("div",{props:{className:"tel-set-separate"}}),BX.create("div",{props:{className:"tel-set-amount-block"},children:[BX.create("div",{props:{className:"webform-button webform-button-create"},html:'<span class="webform-button-left"></span><span class="webform-button-text">'+BX.message("VI_CONFIG_RENT_BTN")+'</span><span class="webform-button-right"></span>',events:{click:function(n){BX.VoxImplant.rentPhone.attachPhone()}}}),BX.create("div",{attrs:{style:"line-height: 33px"},props:{className:"tel-set-amount-text"},html:BX.message("VI_CONFIG_RENT_MONTHLY_FEE").replace("#MONEY#","<strong>"+n+"</strong>")})]})]})}else{var u=BX.create("div",{children:[BX.create("div",{props:{className:"tel-set-list-nums"},children:[e,BX.create("div",{props:{className:"tel-set-list-nums-title"},html:BX.message("VI_CONFIG_RENT_LIST_PHONES")}),BX.create("div",{props:{className:"tel-set-separate"}}),BX.create("div",{props:{className:"tel-set-list-nums-title"},attrs:{style:"margin:0"},html:BX.message("VI_CONFIG_RENT_NO_PHONES")})]}),BX.create("div",{props:{className:"tel-set-separate"}})]})}BX.VoxImplant.rentPhone.numbersPlaceholder.innerHTML="";BX.VoxImplant.rentPhone.numbersPlaceholder.appendChild(u)};BX.VoxImplant.rentPhone.attachPhone=function(n){if(BX.VoxImplant.rentPhone.blockAjax)return true;if(!(BX.VoxImplant.rentPhone.currentCountry&&BX.VoxImplant.rentPhone.currentCountryCategory)){alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR_2"));return false}if(!(BX.VoxImplant.rentPhone.currentCountry&&BX.VoxImplant.rentPhone.currentCountryRegion)){alert(BX.message("VI_CONFIG_RENT_AJAX_NUMBER"));return false}if(BX.VoxImplant.rentPhone.country[BX.VoxImplant.rentPhone.currentCountry].CAN_LIST_PHONES&&BX.VoxImplant.rentPhone.currentNumber==""){alert(BX.message("VI_CONFIG_RENT_AJAX_NUMBER"));return false}var e=BX.message("VI_CONFIG_RENT_FEE_"+BX.VoxImplant.rentPhone.phoneNumberCurrency).replace("#MONEY#",BX.VoxImplant.rentPhone.phoneNumberPrice);if(!confirm(BX.message("VI_CONFIG_RENT_WARN").replace("#MONEY#",e))){return false}var t=1;var r="";if(BX.VoxImplant.rentPhone.currentNumber!=""){t=0;r=BX.VoxImplant.rentPhone.currentNumber}BX.showWait();BX.VoxImplant.rentPhone.blockAjax=true;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_RENT_NUMBER",method:"POST",dataType:"json",timeout:60,data:{VI_RENT_NUMBER:"Y",PRE_MONEY_CHECK:BX.VoxImplant.rentPhone.phoneNumberPrice,CURRENT_NUMBER:r,REGION_ID:BX.VoxImplant.rentPhone.currentCountryRegion,COUNTRY_CODE:BX.VoxImplant.rentPhone.currentCountry,COUNTRY_STATE:BX.VoxImplant.rentPhone.currentCountryState,COUNTRY_CATEGORY:BX.VoxImplant.rentPhone.currentCountryCategory,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(n){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false;if(n.ERROR==""){location.href=BX.VoxImplant.rentPhone.publicFolder+"edit.php?ID="+n.RESULT.ID}else if(n.ERROR=="ATTACHED"){alert(BX.message("VI_CONFIG_RENT_WAS_ATTACHED"))}else if(n.ERROR=="NO_MONEY"){alert(BX.message("VI_CONFIG_RENT_MONEY_LOW"))}else{alert(BX.message("VI_CONFIG_RENT_AJAX_ERROR_2"))}},this),onfailure:function(){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false}})};BX.VoxImplant.rentPhone.unlinkPhone=function(n){if(BX.VoxImplant.rentPhone.blockAjax)return true;if(!confirm(BX.message("VI_CONFIG_RENT_PHONE_DELETE_CONFIRM"))){return false}BX.showWait();BX.VoxImplant.rentPhone.blockAjax=true;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_UNLINK_NUMBER",method:"POST",dataType:"json",timeout:60,data:{VI_UNLINK_NUMBER:"Y",NUMBER_ID:n,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false;if(e.ERROR==""){BX("phone-confing-unlink-"+n).style.display="none";BX("phone-confing-link-"+n).style.display="inline-block"}},this),onfailure:function(){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false}})};BX.VoxImplant.rentPhone.cancelUnlinkPhone=function(n){if(BX.VoxImplant.rentPhone.blockAjax)return true;BX.showWait();BX.VoxImplant.rentPhone.blockAjax=true;BX.ajax({url:"/bitrix/components/bitrix/voximplant.config.rent/ajax.php?VI_CANCEL_UNLINK_NUMBER",method:"POST",dataType:"json",timeout:60,data:{VI_CANCEL_UNLINK_NUMBER:"Y",NUMBER_ID:n,VI_AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false;if(e.ERROR==""){BX("phone-confing-unlink-"+n).style.display="inline-block";BX("phone-confing-link-"+n).style.display="none"}},this),onfailure:function(){BX.closeWait();BX.VoxImplant.rentPhone.blockAjax=false}})};BX.VoxImplant.rentPhone.drawOnPlaceholder=function(n){BX.VoxImplant.rentPhone.placeholder.innerHTML="";BX.adjust(BX.VoxImplant.rentPhone.placeholder,{children:n})};
//# sourceMappingURL=template.map.js