{"version":3,"file":"script.min.js","sources":["script.js"],"names":["BX","CrmContactEditor","this","_id","_settings","_prefix","_typeId","_typeName","_assignedById","_assignedByName","_companyId","_companyName","_addPhoneBtn","_addEmailBtn","_photo","_photoId","_dispatcher","_isDirty","_contextMenuId","prototype","initialize","id","settings","getSetting","resolveElement","bind","delegate","_onPhotoAdd","findParent","className","_onTypeSelect","_onResponsibleSelect","_onCompanySelect","_onPhoneAdd","_onEmailAdd","addCustomEvent","window","_onExternalUpdate","_onExternalDelete","_onExternalStatusSelect","_onExternalClientSelect","_onBeforePageOpen","getId","getSettings","name","defaultVal","hasOwnProperty","setSetting","val","getEntityId","parseInt","prepareElementId","toLowerCase","getFieldValue","fieldName","elem","value","createSaveHandler","_onSave","getMessage","messages","type","isNotEmptyString","e","_createMultiField","findPreviousSibling","tagName","PreventDefault","context","CrmMobileContext","getCurrent","createMenu","action","_addPhotoFromLibrary","_addPhotoFromCamera","showMenu","hideMenu","_addPhoto","sourceId","self","app","takePhoto","source","correctOrientation","callback","fileURI","uploadUrl","onSuccess","result","response","decodeURIComponent","info","eval","_setupPhoto","onError","error","options","FileUploadOptions","fileKey","fileName","substr","lastIndexOf","indexOf","mimeType","params","fullpath","sessid","bitrix_sessid","chunkedMode","headers","Connection","ft","FileTransfer","upload","fileId","showUrl","isAndroid","src","parent","parentNode","removeChild","appendChild","url","open","cache","openUserSelector","_onResponsibleChange","multiple","okButtonTitle","cancelButtonTitle","data","userId","userName","users","key","user","innerHTML","util","htmlspecialchars","typeName","anchor","index","fieldId","prefix","toString","isDomNode","multiFields","input","create","props","style","width","insertBefore","select","infos","valueTypeInfos","valueTypeId","valueTypeName","option","text","browser","isIE","add","_saveMultiFields","fields","VALUE","VALUE_TYPE","entityId","ID","PHOTO","NAME","SECOND_NAME","LAST_NAME","ADDRESS","ADDRESS_2","ADDRESS_CITY","ADDRESS_REGION","ADDRESS_PROVINCE","ADDRESS_POSTAL_CODE","ADDRESS_COUNTRY","COMMENTS","TYPE_ID","ASSIGNED_BY_ID","companyId","createEntity","createCloseHandler","contextId","title","updateEntity","eventArgs","senderId","close","typeId","statusId","caption","reload","items"],"mappings":"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"}